import{o as N,c as p,a as t,s as y,F as w,q as C,e as n,N as f,g as _,d as b,v as r,E as U,L as V,b as E,r as k,G as h,k as o,x as G,t as u,h as v}from"./app-C4KUgVyX.js";import{s as P}from"./settings-BRfTKV2T.js";import{u as j}from"./useNotification-Dk22ynPJ.js";import{O}from"./constants-CkKKVJMd.js";import{_ as g}from"./Alert-COQRhmAu.js";import{_ as $}from"./LoadingSpinner-BnFVoTYS.js";/* empty css            */import"./notifications-DWxlJY1z.js";const B={class:"border-b border-gray-200 mb-6"},F={class:"-mb-px flex space-x-8"},D=["onClick"],H={class:"card"},R={class:"card-body"},K={class:"space-y-4"},Y={class:"mt-6 flex justify-end"},z=["disabled"],J={key:0},Q={key:1},W={class:"card"},X={class:"card-body"},Z={class:"space-y-4"},ee={key:0,class:"mt-2 mb-3"},te=["src"],se={class:"mt-6 flex justify-end"},ae=["disabled"],le={key:0},ne={key:1},oe={class:"card"},ie={class:"card-body"},pe={class:"space-y-4"},re={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},de={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},me={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},ue={class:"mt-6 flex justify-end"},ye=["disabled"],be={key:0},ce={key:1},fe={class:"card"},_e={class:"card-body"},ve={class:"space-y-4"},ge={class:"flex items-center justify-between"},xe={class:"relative inline-flex items-center cursor-pointer"},ke=["value"],Se={class:"flex items-center justify-between"},we={class:"relative inline-flex items-center cursor-pointer"},he={class:"mt-6 flex justify-end"},Ae=["disabled"],Ce={key:0},Ue={key:1},Ve={class:"card"},Pe={class:"card-body"},Ie={class:"space-y-4"},Me={class:"mt-6 flex justify-end"},Le=["disabled"],Te={key:0},qe={key:1},Re={__name:"SettingsPage",setup(Ne){const S=j(),A=k(!0),m=k("general"),I=[{key:"general",label:"General"},{key:"branding",label:"Branding"},{key:"smtp",label:"SMTP / Email"},{key:"openai",label:"OpenAI"},{key:"captcha",label:"Captcha"}],s=h({general:{system_name:""},branding:{logo:null},smtp:{smtp_host:"",smtp_port:587,smtp_username:"",smtp_password:"",smtp_encryption:"tls",smtp_from_address:"",smtp_from_name:""},openai:{openai_enabled:!1,openai_api_key:"",openai_model:"",openai_temperature:.7,openai_max_tokens:1e3,openai_queue_enabled:!1,openai_daily_limit:100},captcha:{recaptcha_site_key:"",recaptcha_secret_key:""}}),d=h({general:!1,branding:!1,smtp:!1,openai:!1,captcha:!1}),i=h({general:{type:"",message:""},branding:{type:"",message:""},smtp:{type:"",message:""},openai:{type:"",message:""},captcha:{type:"",message:""}}),x=k(null),M=k(null);function L(l){const e=l.target.files[0];e&&(s.branding.logo=e,x.value=URL.createObjectURL(e))}function T(l){i[l].type="",i[l].message=""}function q(l){l.general&&(s.general.system_name=l.general.system_name||""),l.branding?.system_logo&&(x.value=l.branding.system_logo),l.smtp&&(s.smtp.smtp_host=l.smtp.smtp_host||"",s.smtp.smtp_port=parseInt(l.smtp.smtp_port)||587,s.smtp.smtp_username=l.smtp.smtp_username||"",s.smtp.smtp_password=l.smtp.smtp_password||"",s.smtp.smtp_encryption=l.smtp.smtp_encryption||"tls",s.smtp.smtp_from_address=l.smtp.smtp_from_address||"",s.smtp.smtp_from_name=l.smtp.smtp_from_name||""),l.openai&&(s.openai.openai_enabled=l.openai.openai_enabled==="1"||l.openai.openai_enabled===!0,s.openai.openai_api_key=l.openai.openai_api_key||"",s.openai.openai_model=l.openai.openai_model||"",s.openai.openai_temperature=parseFloat(l.openai.openai_temperature)||.7,s.openai.openai_max_tokens=parseInt(l.openai.openai_max_tokens)||1e3,s.openai.openai_queue_enabled=l.openai.openai_queue_enabled==="1"||l.openai.openai_queue_enabled===!0,s.openai.openai_daily_limit=parseInt(l.openai.openai_daily_limit)||100),l.captcha&&(s.captcha.recaptcha_site_key=l.captcha.recaptcha_site_key||"",s.captcha.recaptcha_secret_key=l.captcha.recaptcha_secret_key||"")}async function c(l){d[l]=!0,T(l);try{await P.updateGroup(l,s[l]),i[l].type="success",i[l].message="Settings saved successfully.",S.success("Settings saved successfully.")}catch(e){const a=e.response?.data?.message||"Failed to save settings. Please try again.";i[l].type="error",i[l].message=a,S.error(a)}finally{d[l]=!1}}return N(async()=>{try{const{data:l}=await P.getAll();q(l.data||l)}catch{S.error("Failed to load settings.")}A.value=!1}),(l,e)=>(o(),p("div",null,[e[52]||(e[52]=t("div",{class:"mb-6"},[t("h1",{class:"page-title"},"Settings"),t("p",{class:"page-subtitle"},"Manage system configuration")],-1)),A.value?(o(),y($,{key:0,"full-page":"",text:"Loading settings..."})):(o(),p(w,{key:1},[t("div",B,[t("nav",F,[(o(),p(w,null,C(I,a=>t("button",{key:a.key,onClick:Ee=>m.value=a.key,class:G(["whitespace-nowrap border-b-2 py-3 px-1 text-sm font-medium transition-colors",m.value===a.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"])},u(a.label),11,D)),64))])]),n(t("div",H,[t("div",R,[i.general.message?(o(),y(g,{key:0,type:i.general.type,class:"mb-4"},{default:_(()=>[v(u(i.general.message),1)]),_:1},8,["type"])):b("",!0),t("div",K,[t("div",null,[e[22]||(e[22]=t("label",{class:"label-text"},"System Name",-1)),n(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>s.general.system_name=a),type:"text",class:"input-field",placeholder:"Enter system name"},null,512),[[r,s.general.system_name]])])]),t("div",Y,[t("button",{onClick:e[1]||(e[1]=a=>c("general")),disabled:d.general,class:"btn-primary"},[d.general?(o(),p("span",J,"Saving...")):(o(),p("span",Q,"Save General Settings"))],8,z)])])],512),[[f,m.value==="general"]]),n(t("div",W,[t("div",X,[i.branding.message?(o(),y(g,{key:0,type:i.branding.type,class:"mb-4"},{default:_(()=>[v(u(i.branding.message),1)]),_:1},8,["type"])):b("",!0),t("div",Z,[t("div",null,[e[24]||(e[24]=t("label",{class:"label-text"},"System Logo",-1)),x.value?(o(),p("div",ee,[e[23]||(e[23]=t("p",{class:"text-xs text-gray-500 mb-1"},"Current logo:",-1)),t("img",{src:x.value,alt:"System logo",class:"h-16 w-auto rounded border border-gray-200 bg-white p-1"},null,8,te)])):b("",!0),t("input",{ref_key:"logoInput",ref:M,type:"file",accept:"image/*",class:"input-field",onChange:L},null,544),e[25]||(e[25]=t("p",{class:"mt-1 text-xs text-gray-500"},"Accepted formats: JPG, PNG, SVG. Max 2MB recommended.",-1))])]),t("div",se,[t("button",{onClick:e[2]||(e[2]=a=>c("branding")),disabled:d.branding||!s.branding.logo,class:"btn-primary"},[d.branding?(o(),p("span",le,"Uploading...")):(o(),p("span",ne,"Save Branding"))],8,ae)])])],512),[[f,m.value==="branding"]]),n(t("div",oe,[t("div",ie,[i.smtp.message?(o(),y(g,{key:0,type:i.smtp.type,class:"mb-4"},{default:_(()=>[v(u(i.smtp.message),1)]),_:1},8,["type"])):b("",!0),t("div",pe,[t("div",re,[t("div",null,[e[26]||(e[26]=t("label",{class:"label-text"},"SMTP Host",-1)),n(t("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>s.smtp.smtp_host=a),type:"text",class:"input-field",placeholder:"smtp-relay.brevo.com"},null,512),[[r,s.smtp.smtp_host]])]),t("div",null,[e[27]||(e[27]=t("label",{class:"label-text"},"SMTP Port",-1)),n(t("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>s.smtp.smtp_port=a),type:"number",class:"input-field",placeholder:"587"},null,512),[[r,s.smtp.smtp_port,void 0,{number:!0}]])])]),t("div",de,[t("div",null,[e[28]||(e[28]=t("label",{class:"label-text"},"Username",-1)),n(t("input",{"onUpdate:modelValue":e[5]||(e[5]=a=>s.smtp.smtp_username=a),type:"text",class:"input-field",placeholder:"your-smtp-login"},null,512),[[r,s.smtp.smtp_username]])]),t("div",null,[e[29]||(e[29]=t("label",{class:"label-text"},"Password",-1)),n(t("input",{"onUpdate:modelValue":e[6]||(e[6]=a=>s.smtp.smtp_password=a),type:"password",class:"input-field",placeholder:"Enter SMTP password"},null,512),[[r,s.smtp.smtp_password]]),e[30]||(e[30]=t("p",{class:"mt-1 text-xs text-gray-500"},"Stored encrypted on the server.",-1))])]),t("div",null,[e[32]||(e[32]=t("label",{class:"label-text"},"Encryption",-1)),n(t("select",{"onUpdate:modelValue":e[7]||(e[7]=a=>s.smtp.smtp_encryption=a),class:"input-field"},[...e[31]||(e[31]=[t("option",{value:"tls"},"TLS",-1),t("option",{value:"ssl"},"SSL",-1),t("option",{value:"none"},"None",-1)])],512),[[U,s.smtp.smtp_encryption]])]),t("div",me,[t("div",null,[e[33]||(e[33]=t("label",{class:"label-text"},"From Address",-1)),n(t("input",{"onUpdate:modelValue":e[8]||(e[8]=a=>s.smtp.smtp_from_address=a),type:"email",class:"input-field",placeholder:"noreply@yourdomain.com"},null,512),[[r,s.smtp.smtp_from_address]])]),t("div",null,[e[34]||(e[34]=t("label",{class:"label-text"},"From Name",-1)),n(t("input",{"onUpdate:modelValue":e[9]||(e[9]=a=>s.smtp.smtp_from_name=a),type:"text",class:"input-field",placeholder:"System Name"},null,512),[[r,s.smtp.smtp_from_name]])])])]),t("div",ue,[t("button",{onClick:e[10]||(e[10]=a=>c("smtp")),disabled:d.smtp,class:"btn-primary"},[d.smtp?(o(),p("span",be,"Saving...")):(o(),p("span",ce,"Save SMTP Settings"))],8,ye)])])],512),[[f,m.value==="smtp"]]),n(t("div",fe,[t("div",_e,[i.openai.message?(o(),y(g,{key:0,type:i.openai.type,class:"mb-4"},{default:_(()=>[v(u(i.openai.message),1)]),_:1},8,["type"])):b("",!0),t("div",ve,[t("div",ge,[e[36]||(e[36]=t("div",null,[t("label",{class:"label-text"},"Enable OpenAI Integration"),t("p",{class:"text-xs text-gray-500"},"Allow AI-powered analysis of reports")],-1)),t("label",xe,[n(t("input",{"onUpdate:modelValue":e[11]||(e[11]=a=>s.openai.openai_enabled=a),type:"checkbox",class:"sr-only peer","true-value":!0,"false-value":!1},null,512),[[V,s.openai.openai_enabled]]),e[35]||(e[35]=t("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-100 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"},null,-1))])]),t("div",null,[e[37]||(e[37]=t("label",{class:"label-text"},"API Key",-1)),n(t("input",{"onUpdate:modelValue":e[12]||(e[12]=a=>s.openai.openai_api_key=a),type:"password",class:"input-field",placeholder:"sk-..."},null,512),[[r,s.openai.openai_api_key]]),e[38]||(e[38]=t("p",{class:"mt-1 text-xs text-gray-500"},"Your OpenAI API key. Stored encrypted on the server.",-1))]),t("div",null,[e[40]||(e[40]=t("label",{class:"label-text"},"Model",-1)),n(t("select",{"onUpdate:modelValue":e[13]||(e[13]=a=>s.openai.openai_model=a),class:"input-field"},[e[39]||(e[39]=t("option",{value:"",disabled:""},"Select a model",-1)),(o(!0),p(w,null,C(E(O),a=>(o(),p("option",{key:a.value,value:a.value},u(a.label),9,ke))),128))],512),[[U,s.openai.openai_model]])]),t("div",null,[e[41]||(e[41]=t("label",{class:"label-text"},"Temperature",-1)),n(t("input",{"onUpdate:modelValue":e[14]||(e[14]=a=>s.openai.openai_temperature=a),type:"number",step:"0.1",min:"0",max:"2",class:"input-field",placeholder:"0.7"},null,512),[[r,s.openai.openai_temperature,void 0,{number:!0}]]),e[42]||(e[42]=t("p",{class:"mt-1 text-xs text-gray-500"},"Controls randomness. Lower values are more focused, higher values more creative (0-2).",-1))]),t("div",null,[e[43]||(e[43]=t("label",{class:"label-text"},"Max Tokens",-1)),n(t("input",{"onUpdate:modelValue":e[15]||(e[15]=a=>s.openai.openai_max_tokens=a),type:"number",min:"100",max:"4000",class:"input-field",placeholder:"1000"},null,512),[[r,s.openai.openai_max_tokens,void 0,{number:!0}]]),e[44]||(e[44]=t("p",{class:"mt-1 text-xs text-gray-500"},"Maximum number of tokens in the response (100-4000).",-1))]),t("div",Se,[e[46]||(e[46]=t("div",null,[t("label",{class:"label-text"},"Queue AI Requests"),t("p",{class:"text-xs text-gray-500"},"Process AI requests asynchronously via queue")],-1)),t("label",we,[n(t("input",{"onUpdate:modelValue":e[16]||(e[16]=a=>s.openai.openai_queue_enabled=a),type:"checkbox",class:"sr-only peer","true-value":!0,"false-value":!1},null,512),[[V,s.openai.openai_queue_enabled]]),e[45]||(e[45]=t("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-100 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"},null,-1))])]),t("div",null,[e[47]||(e[47]=t("label",{class:"label-text"},"Daily Request Limit",-1)),n(t("input",{"onUpdate:modelValue":e[17]||(e[17]=a=>s.openai.openai_daily_limit=a),type:"number",min:"0",class:"input-field",placeholder:"100"},null,512),[[r,s.openai.openai_daily_limit,void 0,{number:!0}]]),e[48]||(e[48]=t("p",{class:"mt-1 text-xs text-gray-500"},"Maximum AI requests per day. Set 0 for unlimited.",-1))])]),t("div",he,[t("button",{onClick:e[18]||(e[18]=a=>c("openai")),disabled:d.openai,class:"btn-primary"},[d.openai?(o(),p("span",Ce,"Saving...")):(o(),p("span",Ue,"Save OpenAI Settings"))],8,Ae)])])],512),[[f,m.value==="openai"]]),n(t("div",Ve,[t("div",Pe,[i.captcha.message?(o(),y(g,{key:0,type:i.captcha.type,class:"mb-4"},{default:_(()=>[v(u(i.captcha.message),1)]),_:1},8,["type"])):b("",!0),t("div",Ie,[t("div",null,[e[49]||(e[49]=t("label",{class:"label-text"},"reCAPTCHA Site Key",-1)),n(t("input",{"onUpdate:modelValue":e[19]||(e[19]=a=>s.captcha.recaptcha_site_key=a),type:"text",class:"input-field",placeholder:"6Lc..."},null,512),[[r,s.captcha.recaptcha_site_key]])]),t("div",null,[e[50]||(e[50]=t("label",{class:"label-text"},"reCAPTCHA Secret Key",-1)),n(t("input",{"onUpdate:modelValue":e[20]||(e[20]=a=>s.captcha.recaptcha_secret_key=a),type:"password",class:"input-field",placeholder:"6Lc..."},null,512),[[r,s.captcha.recaptcha_secret_key]]),e[51]||(e[51]=t("p",{class:"mt-1 text-xs text-gray-500"},"Your Google reCAPTCHA v2/v3 secret key. Stored encrypted on the server.",-1))])]),t("div",Me,[t("button",{onClick:e[21]||(e[21]=a=>c("captcha")),disabled:d.captcha,class:"btn-primary"},[d.captcha?(o(),p("span",Te,"Saving...")):(o(),p("span",qe,"Save Captcha Settings"))],8,Le)])])],512),[[f,m.value==="captcha"]])],64))]))}};export{Re as default};
