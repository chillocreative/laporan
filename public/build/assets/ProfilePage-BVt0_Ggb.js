import{u as V,o as N,c as d,a as s,w as h,t as l,d as p,e as f,v as b,r as c,G as k,k as i,D as E}from"./app-UaHG2GIC.js";import{u as O}from"./useAuth-QBQXqBYk.js";import{u as q}from"./useNotification-BKUB2kWQ.js";/* empty css            */import"./notifications-DAQLrICC.js";const C={class:"max-w-3xl mx-auto"},F={class:"card mb-6"},B={class:"card-body"},D={key:0,class:"rounded-lg bg-red-50 p-3 text-sm text-red-700"},M={key:0,class:"mt-1 text-xs text-red-600"},A={key:0,class:"mt-1 text-xs text-red-600"},G={class:"flex justify-end pt-4 border-t border-gray-100"},I=["disabled"],T={class:"card"},z={class:"card-body"},H={key:0,class:"rounded-lg bg-red-50 p-3 text-sm text-red-700"},J={key:1,class:"rounded-lg bg-green-50 p-3 text-sm text-green-700"},K={key:0,class:"mt-1 text-xs text-red-600"},L={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Q={key:0,class:"mt-1 text-xs text-red-600"},R={class:"flex justify-end pt-4 border-t border-gray-100"},W=["disabled"],te={__name:"ProfilePage",setup(X){const _=O(),U=V(),P=q(),r=c({name:"",email:""}),m=c(""),n=k({}),w=c(!1),o=c({current_password:"",password:"",password_confirmation:""}),v=c(""),y=c(""),u=k({}),x=c(!1);N(()=>{r.value.name=_.user.value?.name||"",r.value.email=_.user.value?.email||""});async function j(){w.value=!0,m.value="",Object.keys(n).forEach(a=>delete n[a]);try{await E.put("/profile",{name:r.value.name,email:r.value.email}),await U.fetchUser(),P.success("Profile updated successfully!")}catch(a){const e=a.response?.data?.errors;e?(Object.entries(e).forEach(([t,g])=>{n[t]=g[0]}),m.value=Object.values(e).flat()[0]):m.value=a.response?.data?.message||"Failed to update profile."}finally{w.value=!1}}async function S(){x.value=!0,v.value="",y.value="",Object.keys(u).forEach(a=>delete u[a]);try{await E.put("/profile/password",o.value),o.value={current_password:"",password:"",password_confirmation:""},y.value="Password updated successfully!",P.success("Password updated successfully!")}catch(a){const e=a.response?.data?.errors;e?(Object.entries(e).forEach(([t,g])=>{u[t]=g[0]}),v.value=Object.values(e).flat()[0]):v.value=a.response?.data?.message||"Failed to update password."}finally{x.value=!1}}return(a,e)=>(i(),d("div",C,[e[12]||(e[12]=s("h1",{class:"page-title mb-6"},"Profile",-1)),s("div",F,[s("div",B,[e[7]||(e[7]=s("h2",{class:"text-base font-semibold text-gray-900 mb-4"},"Personal Information",-1)),s("form",{onSubmit:h(j,["prevent"]),class:"space-y-5"},[m.value?(i(),d("div",D,l(m.value),1)):p("",!0),s("div",null,[e[5]||(e[5]=s("label",{class:"label-text"},"Name *",-1)),f(s("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>r.value.name=t),type:"text",required:"",class:"input-field"},null,512),[[b,r.value.name]]),n.name?(i(),d("p",M,l(n.name),1)):p("",!0)]),s("div",null,[e[6]||(e[6]=s("label",{class:"label-text"},"Email *",-1)),f(s("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>r.value.email=t),type:"email",required:"",class:"input-field"},null,512),[[b,r.value.email]]),n.email?(i(),d("p",A,l(n.email),1)):p("",!0)]),s("div",G,[s("button",{type:"submit",disabled:w.value,class:"btn-primary"},l(w.value?"Saving...":"Save Changes"),9,I)])],32)])]),s("div",T,[s("div",z,[e[11]||(e[11]=s("h2",{class:"text-base font-semibold text-gray-900 mb-4"},"Change Password",-1)),s("form",{onSubmit:h(S,["prevent"]),class:"space-y-5"},[v.value?(i(),d("div",H,l(v.value),1)):p("",!0),y.value?(i(),d("div",J,l(y.value),1)):p("",!0),s("div",null,[e[8]||(e[8]=s("label",{class:"label-text"},"Current Password *",-1)),f(s("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.value.current_password=t),type:"password",required:"",class:"input-field"},null,512),[[b,o.value.current_password]]),u.current_password?(i(),d("p",K,l(u.current_password),1)):p("",!0)]),s("div",L,[s("div",null,[e[9]||(e[9]=s("label",{class:"label-text"},"New Password *",-1)),f(s("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>o.value.password=t),type:"password",required:"",class:"input-field"},null,512),[[b,o.value.password]]),u.password?(i(),d("p",Q,l(u.password),1)):p("",!0)]),s("div",null,[e[10]||(e[10]=s("label",{class:"label-text"},"Confirm New Password *",-1)),f(s("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>o.value.password_confirmation=t),type:"password",required:"",class:"input-field"},null,512),[[b,o.value.password_confirmation]])])]),s("div",R,[s("button",{type:"submit",disabled:x.value,class:"btn-primary"},l(x.value?"Updating...":"Update Password"),9,W)])],32)])])]))}};export{te as default};
