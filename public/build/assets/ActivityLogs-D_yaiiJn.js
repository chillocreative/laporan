import{o as k,c as P,a,e as d,v as c,f as g,g as n,G as y,r as v,k as T,t as i,b as w,h as C}from"./app-CQob2CXV.js";import{l as V}from"./logs--gnDqPzr.js";import{a as A}from"./formatters-mqXhrHnm.js";import{_ as L}from"./DataTable-CBHjvgis.js";import{_ as U}from"./Badge-z3vH81Ng.js";import{_ as B}from"./Pagination-DJfjs7f7.js";/* empty css            */import"./LoadingSpinner-C2gbwHS5.js";const D={class:"card mb-6"},I={class:"card-body"},N={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},$={class:"card"},j={class:"font-medium text-gray-900"},E={class:"text-sm text-gray-600 max-w-xs truncate block"},F={class:"font-mono text-xs text-gray-500"},M={class:"text-xs text-gray-500"},G={class:"px-4 border-t border-gray-100"},W={__name:"ActivityLogs",setup(J){const p=v([]),u=v(!0),l=y({currentPage:1,lastPage:1,total:0}),s=y({search:"",user:"",date_from:"",date_to:""});let m;const _=()=>{clearTimeout(m),m=setTimeout(()=>r(),400)},x=[{key:"user_name",label:"Pengguna"},{key:"action",label:"Tindakan"},{key:"description",label:"Penerangan"},{key:"ip_address",label:"Alamat IP"},{key:"created_at",label:"Tarikh"}];function h(o){if(!o)return"gray";const t=o.toLowerCase();return{created:"green",updated:"blue",deleted:"red",login:"indigo",logout:"gray",exported:"yellow",imported:"orange"}[t]||"gray"}async function r(o=1){u.value=!0;try{const t={...s,page:o,per_page:15};Object.keys(t).forEach(f=>{t[f]||delete t[f]});const{data:e}=await V.activity(t);p.value=e.data,l.currentPage=e.meta?.current_page||1,l.lastPage=e.meta?.last_page||1,l.total=e.meta?.total||0}catch{p.value=[]}u.value=!1}function b(o){r(o)}return k(()=>r()),(o,t)=>(T(),P("div",null,[t[4]||(t[4]=a("div",{class:"mb-6"},[a("h1",{class:"page-title"},"Log Aktiviti"),a("p",{class:"page-subtitle"},"Jejaki semua aktiviti pengguna dalam sistem")],-1)),a("div",D,[a("div",I,[a("div",N,[d(a("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.search=e),onInput:_,type:"text",placeholder:"Cari mengikut penerangan...",class:"input-field"},null,544),[[c,s.search]]),d(a("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>s.user=e),onInput:_,type:"text",placeholder:"Tapis mengikut pengguna...",class:"input-field"},null,544),[[c,s.user]]),d(a("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>s.date_from=e),onChange:r,type:"date",class:"input-field",placeholder:"From date"},null,544),[[c,s.date_from]]),d(a("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>s.date_to=e),onChange:r,type:"date",class:"input-field",placeholder:"To date"},null,544),[[c,s.date_to]])])])]),a("div",$,[g(L,{columns:x,items:p.value,loading:u.value},{"cell-user_name":n(({item:e})=>[a("span",j,i(e.user_name||"-"),1)]),"cell-action":n(({item:e})=>[g(U,{color:h(e.action)},{default:n(()=>[C(i(e.action),1)]),_:2},1032,["color"])]),"cell-description":n(({item:e})=>[a("span",E,i(e.description),1)]),"cell-ip_address":n(({item:e})=>[a("span",F,i(e.ip_address||"-"),1)]),"cell-created_at":n(({item:e})=>[a("span",M,i(w(A)(e.created_at)),1)]),_:1},8,["items","loading"]),a("div",G,[g(B,{"current-page":l.currentPage,"last-page":l.lastPage,total:l.total,onPageChange:b},null,8,["current-page","last-page","total"])])])]))}};export{W as default};
