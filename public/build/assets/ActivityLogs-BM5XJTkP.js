import{o as k,c as P,a,e as c,v as d,f as m,g as r,G as y,r as v,k as T,t as i,b as w,h as V}from"./app-UaHG2GIC.js";import{l as C}from"./logs-BrY1lVJk.js";import{a as A}from"./formatters-mqXhrHnm.js";import{_ as D}from"./DataTable-D6r3aRVp.js";import{_ as U}from"./Badge-DAhmnd02.js";import{_ as L}from"./Pagination-D0576I20.js";/* empty css            */import"./LoadingSpinner-BRfTtkMt.js";const B={class:"card mb-6"},F={class:"card-body"},I={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},N={class:"card"},$={class:"font-medium text-gray-900"},E={class:"text-sm text-gray-600 max-w-xs truncate block"},M={class:"font-mono text-xs text-gray-500"},S={class:"text-xs text-gray-500"},j={class:"px-4 border-t border-gray-100"},W={__name:"ActivityLogs",setup(G){const p=v([]),u=v(!0),l=y({currentPage:1,lastPage:1,total:0}),s=y({search:"",user:"",date_from:"",date_to:""});let g;const _=()=>{clearTimeout(g),g=setTimeout(()=>n(),400)},h=[{key:"user_name",label:"User"},{key:"action",label:"Action"},{key:"description",label:"Description"},{key:"ip_address",label:"IP Address"},{key:"created_at",label:"Date"}];function x(o){if(!o)return"gray";const t=o.toLowerCase();return{created:"green",updated:"blue",deleted:"red",login:"indigo",logout:"gray",exported:"yellow",imported:"orange"}[t]||"gray"}async function n(o=1){u.value=!0;try{const t={...s,page:o,per_page:15};Object.keys(t).forEach(f=>{t[f]||delete t[f]});const{data:e}=await C.activity(t);p.value=e.data,l.currentPage=e.meta?.current_page||1,l.lastPage=e.meta?.last_page||1,l.total=e.meta?.total||0}catch{p.value=[]}u.value=!1}function b(o){n(o)}return k(()=>n()),(o,t)=>(T(),P("div",null,[t[4]||(t[4]=a("div",{class:"mb-6"},[a("h1",{class:"page-title"},"Activity Logs"),a("p",{class:"page-subtitle"},"Track all user activities across the system")],-1)),a("div",B,[a("div",F,[a("div",I,[c(a("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.search=e),onInput:_,type:"text",placeholder:"Search by description...",class:"input-field"},null,544),[[d,s.search]]),c(a("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>s.user=e),onInput:_,type:"text",placeholder:"Filter by user...",class:"input-field"},null,544),[[d,s.user]]),c(a("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>s.date_from=e),onChange:n,type:"date",class:"input-field",placeholder:"From date"},null,544),[[d,s.date_from]]),c(a("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>s.date_to=e),onChange:n,type:"date",class:"input-field",placeholder:"To date"},null,544),[[d,s.date_to]])])])]),a("div",N,[m(D,{columns:h,items:p.value,loading:u.value},{"cell-user_name":r(({item:e})=>[a("span",$,i(e.user_name||"-"),1)]),"cell-action":r(({item:e})=>[m(U,{color:x(e.action)},{default:r(()=>[V(i(e.action),1)]),_:2},1032,["color"])]),"cell-description":r(({item:e})=>[a("span",E,i(e.description),1)]),"cell-ip_address":r(({item:e})=>[a("span",M,i(e.ip_address||"-"),1)]),"cell-created_at":r(({item:e})=>[a("span",S,i(w(A)(e.created_at)),1)]),_:1},8,["items","loading"]),a("div",j,[m(L,{"current-page":l.currentPage,"last-page":l.lastPage,total:l.total,onPageChange:b},null,8,["current-page","last-page","total"])])])]))}};export{W as default};
