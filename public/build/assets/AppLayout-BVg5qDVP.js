import{n as C,o as S,p as N,i as M,k as n,c as i,a as e,t as d,b,F as k,q as L,d as f,s as R,g as x,h as A,x as z,y as _,r as w,_ as j,f as p,T as B,z as T,j as U,u as E,A as D,B as P}from"./app-CkgA-AoW.js";import{u as W}from"./notifications-lGq0ZMx-.js";import{u as V}from"./useAuth-DjetSSvL.js";import{u as F}from"./settings-BqoXEVhl.js";import{u as O}from"./users-Pj1-Xddz.js";/* empty css            */import"./settings-CpUejBPp.js";const q={class:"fixed inset-y-0 left-0 z-30 w-64 flex flex-col bg-gradient-to-b from-primary-800 to-primary-900"},G={class:"flex items-center h-16 px-4 bg-primary-900/50"},J={class:"ml-3 text-white font-semibold text-sm truncate"},K={class:"flex-1 overflow-y-auto py-4 px-3 space-y-1"},Q={key:0,class:"pt-4 pb-2 px-3"},X={class:"text-xs font-semibold text-primary-300 uppercase tracking-wider"},Y={class:"mr-3 h-5 w-5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Z=["d"],ee={key:0,class:"ml-auto inline-flex items-center justify-center min-w-[20px] h-5 px-1.5 text-xs font-bold text-white bg-red-500 rounded-full"},H={__name:"Sidebar",setup(y){const r=C(),s=V(),u=F(),h=w(0);let a=null;async function l(){if(s.hasAnyRole(["super-admin","admin"]))try{const{data:o}=await O.pendingCount();h.value=o.data.count}catch{}}S(()=>{l(),a=setInterval(l,6e4)}),N(()=>{a&&clearInterval(a)});function c(o){return r.name===o||r.name?.startsWith?.(o+".")?!0:o?.endsWith?.(".index")?r.name?.startsWith?.(o.replace(/\.index$/,".")):!1}const g=_(()=>[{label:"Dashboard",route:"dashboard",show:!0,icon:"M2.25 12l8.954-8.955a1.126 1.126 0 011.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"},{heading:"Reports",show:!0},{label:"All Reports",route:"reports.index",show:!0,icon:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"},{label:"New Report",route:"reports.create",show:s.hasPermission("reports.create"),icon:"M12 4.5v15m7.5-7.5h-15"},{heading:"Management",show:s.hasAnyRole(["super-admin","admin"])},{label:"Users",route:"users.index",show:s.hasAnyRole(["super-admin","admin"]),badge:h.value,icon:"M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z"},{label:"Categories",route:"categories.index",show:s.hasAnyRole(["super-admin","admin"]),icon:"M9.568 3H5.25A2.25 2.25 0 003 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 005.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 009.568 3z M6 6h.008v.008H6V6z"},{label:"Roles",route:"roles.index",show:s.isSuperAdmin.value,icon:"M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285z"},{heading:"System",show:s.isSuperAdmin.value},{label:"Settings",route:"settings",show:s.isSuperAdmin.value,icon:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"},{label:"Activity Logs",route:"logs.activity",show:s.isSuperAdmin.value,icon:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"},{label:"Security Logs",route:"logs.security",show:s.isSuperAdmin.value,icon:"M12 9v3.75m0-10.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.75c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.57-.598-3.75h-.152c-3.196 0-6.1-1.249-8.25-3.286zm0 13.036h.008v.008H12v-.008z"},{label:"AI Logs",route:"logs.ai",show:s.isSuperAdmin.value,icon:"M9.75 3.104v5.714a2.25 2.25 0 01-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 014.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0112 15a9.065 9.065 0 00-6.23.693L5 14.5m14.8.8l1.402 1.402c1.232 1.232.65 3.318-1.067 3.611A48.309 48.309 0 0112 21c-2.773 0-5.491-.235-8.135-.687-1.718-.293-2.3-2.379-1.067-3.61L5 14.5"}]);return(o,v)=>{const m=M("router-link");return n(),i("div",q,[e("div",G,[v[0]||(v[0]=e("img",{src:"/jata.png",alt:"Logo",class:"h-10 w-10 object-contain flex-shrink-0"},null,-1)),e("span",J,d(b(u).systemName),1)]),e("nav",K,[(n(!0),i(k,null,L(g.value,t=>(n(),i(k,{key:t.name},[t.heading&&t.show?(n(),i("div",Q,[e("p",X,d(t.heading),1)])):f("",!0),!t.heading&&t.show?(n(),R(m,{key:1,to:{name:t.route},class:z([c(t.route)?"bg-white/15 text-white":"text-primary-100 hover:bg-white/10 hover:text-white","group flex items-center px-3 py-2.5 text-sm font-medium rounded-lg transition-colors duration-150"])},{default:x(()=>[(n(),i("svg",Y,[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:t.icon},null,8,Z)])),A(" "+d(t.label)+" ",1),t.badge&&t.badge>0?(n(),i("span",ee,d(t.badge>99?"99+":t.badge),1)):f("",!0)]),_:2},1032,["to","class"])):f("",!0)],64))),128))])])}}},te={key:0,class:"fixed inset-0 z-40 lg:hidden"},se={class:"fixed inset-y-0 left-0 w-64"},oe={__name:"MobileSidebar",props:{open:Boolean},emits:["close"],setup(y){return(r,s)=>(n(),R(T,{to:"body"},[p(B,{name:"sidebar"},{default:x(()=>[y.open?(n(),i("div",te,[e("div",{class:"fixed inset-0 bg-gray-900/70",onClick:s[0]||(s[0]=u=>r.$emit("close"))}),e("div",se,[p(H)])])):f("",!0)]),_:1})]))}},ne=j(oe,[["__scopeId","data-v-95a8c5f3"]]),re={class:"sticky top-0 z-20 flex h-16 items-center gap-4 border-b border-gray-200 bg-white px-4 sm:px-6 lg:px-8"},ae={class:"flex-1 min-w-0"},ie={class:"text-lg font-semibold text-gray-900 truncate"},le={class:"h-8 w-8 rounded-full bg-primary-600 flex items-center justify-center text-white text-xs font-bold"},ce={class:"hidden sm:block text-sm font-medium text-gray-700"},de={key:0,class:"absolute right-0 mt-2 w-56 rounded-lg bg-white shadow-lg ring-1 ring-black/5 py-1"},ue={class:"px-4 py-3 border-b border-gray-100"},pe={class:"text-sm font-medium text-gray-900 truncate"},me={class:"text-xs text-gray-500 truncate"},he={__name:"Topbar",emits:["toggle-sidebar"],setup(y){const r=C(),s=U(),u=V(),h=E(),a=w(!1),l=w(null),c=_(()=>(u.user.value?.name||"").split(" ").map(t=>t[0]).join("").toUpperCase().substring(0,2)),g=_(()=>({dashboard:"Dashboard","reports.index":"Reports","reports.create":"New Report","reports.show":"Report Details","reports.edit":"Edit Report","users.index":"Users","users.create":"New User","users.edit":"Edit User","roles.index":"Roles","roles.create":"New Role","roles.edit":"Edit Role","categories.index":"Categories",settings:"Settings","logs.activity":"Activity Logs","logs.security":"Security Logs","logs.ai":"AI Logs",profile:"Profile"})[r.name]||"Sistem Pelaporan");function o(m){l.value&&!l.value.contains(m.target)&&(a.value=!1)}S(()=>document.addEventListener("click",o)),D(()=>document.removeEventListener("click",o));async function v(){a.value=!1,await h.logout(),s.push({name:"login"})}return(m,t)=>{const I=M("router-link");return n(),i("header",re,[e("button",{onClick:t[0]||(t[0]=$=>m.$emit("toggle-sidebar")),class:"lg:hidden -ml-1 p-2 rounded-md text-gray-500 hover:text-gray-700 hover:bg-gray-100"},[...t[3]||(t[3]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})],-1)])]),e("div",ae,[e("h1",ie,d(g.value),1)]),e("div",{class:"relative",ref_key:"dropdownRef",ref:l},[e("button",{onClick:t[1]||(t[1]=$=>a.value=!a.value),class:"flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-gray-100 transition-colors"},[e("div",le,d(c.value),1),e("span",ce,d(b(u).user.value?.name),1),t[4]||(t[4]=e("svg",{class:"hidden sm:block h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})],-1))]),p(B,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:x(()=>[a.value?(n(),i("div",de,[e("div",ue,[e("p",pe,d(b(u).user.value?.name),1),e("p",me,d(b(u).user.value?.email),1)]),p(I,{to:{name:"profile"},onClick:t[2]||(t[2]=$=>a.value=!1),class:"flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50"},{default:x(()=>[...t[5]||(t[5]=[e("svg",{class:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"})],-1),A(" Profile ",-1)])]),_:1}),e("div",{class:"border-t border-gray-100"},[e("button",{onClick:v,class:"flex items-center gap-2 w-full px-4 py-2 text-sm text-red-600 hover:bg-red-50"},[...t[6]||(t[6]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"})],-1),A(" Logout ",-1)])])])])):f("",!0)]),_:1})],512)])}}},ge={class:"min-h-screen bg-gray-50"},ve={class:"lg:pl-64"},fe={class:"p-4 sm:p-6 lg:p-8"},xe={class:"fixed top-4 right-4 z-50 space-y-2 w-80"},ye=["onClick"],be={__name:"AppLayout",setup(y){const r=w(!1),s=W(),u=_(()=>s.items),h=l=>s.remove(l);function a(l){const c={success:"bg-green-500 text-white",error:"bg-red-500 text-white",warning:"bg-yellow-500 text-white",info:"bg-primary-500 text-white"};return c[l]||c.info}return(l,c)=>{const g=M("router-view");return n(),i("div",ge,[p(ne,{open:r.value,onClose:c[0]||(c[0]=o=>r.value=!1)},null,8,["open"]),p(H,{class:"hidden lg:flex"}),e("div",ve,[p(he,{onToggleSidebar:c[1]||(c[1]=o=>r.value=!r.value)}),e("main",fe,[e("div",xe,[p(P,{name:"notification"},{default:x(()=>[(n(!0),i(k,null,L(u.value,o=>(n(),i("div",{key:o.id,class:z([a(o.type),"rounded-lg px-4 py-3 shadow-lg text-sm font-medium flex items-center justify-between"])},[e("span",null,d(o.message),1),e("button",{onClick:v=>h(o.id),class:"ml-3 opacity-70 hover:opacity-100"},"Ã—",8,ye)],2))),128))]),_:1})]),p(g)])])])}}},Se=j(be,[["__scopeId","data-v-8c56721b"]]);export{Se as default};
