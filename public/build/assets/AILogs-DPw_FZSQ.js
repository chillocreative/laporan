import{o as A,c as p,a as e,f as i,b as g,e as f,E as I,v as x,g as o,G as k,r as b,k as v,t as l,h as q}from"./app-CSiPyXD6.js";import{l as L}from"./logs-BviYPNq9.js";import{b as M,a as C}from"./formatters-mqXhrHnm.js";import{_ as V}from"./DataTable-DxRrS8nj.js";import{_ as U}from"./Badge-CIfH-R9m.js";import{_ as w}from"./Pagination-Dnkz0CfI.js";import{_ as y}from"./StatCard-BIyyuluh.js";/* empty css            */import"./LoadingSpinner-cNTPVvEo.js";const z={class:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6"},B={class:"card mb-6"},D={class:"card-body"},$={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},E={class:"card"},H={class:"font-mono text-xs text-gray-700"},N={class:"text-sm font-medium text-gray-700"},j={class:"text-sm text-gray-600"},G={class:"text-sm text-gray-600"},J={class:"text-sm font-medium text-gray-800"},K={class:"text-sm text-gray-600"},O={key:0,class:"text-xs text-gray-500"},F={key:1,class:"text-xs text-gray-400"},R={class:"text-xs text-gray-500"},Q={class:"px-4 border-t border-gray-100"},nt={__name:"AILogs",setup(W){const m=b([]),_=b(!0),n=k({total_requests:null,total_tokens:null,estimated_cost:null}),c=k({currentPage:1,lastPage:1,total:0}),r=k({status:"",date_from:"",date_to:""}),u={requests:"M3.75 3v11.25A2.25 2.25 0 006 16.5h2.25M3.75 3h-1.5m1.5 0h16.5m0 0h1.5m-1.5 0v11.25A2.25 2.25 0 0118 16.5h-2.25m-7.5 0h7.5m-7.5 0l-1 3m8.5-3l1 3m0 0l.5 1.5m-.5-1.5h-9.5m0 0l-.5 1.5M9 11.25v1.5M12 9v3.75m3-6v6",tokens:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.455 2.456L21.75 6l-1.036.259a3.375 3.375 0 00-2.455 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z",cost:"M12 6v12m-3-2.818l.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},P=[{key:"report_id",label:"ID Laporan"},{key:"model",label:"Model"},{key:"prompt_tokens",label:"Prompt"},{key:"completion_tokens",label:"Pelengkapan"},{key:"total_tokens",label:"Jumlah Token"},{key:"estimated_cost",label:"Kos"},{key:"response_time",label:"Masa Respons"},{key:"status",label:"Status"},{key:"created_at",label:"Tarikh"}];async function S(){try{const{data:s}=await L.aiTodayUsage();n.total_requests=s.data?.total_requests??s.total_requests??0,n.total_tokens=s.data?.total_tokens??s.total_tokens??0,n.estimated_cost=s.data?.estimated_cost??s.estimated_cost??0}catch{}}async function d(s=1){_.value=!0;try{const a={...r,page:s,per_page:15};Object.keys(a).forEach(h=>{a[h]||delete a[h]});const{data:t}=await L.ai(a);m.value=t.data,c.currentPage=t.meta?.current_page||1,c.lastPage=t.meta?.last_page||1,c.total=t.meta?.total||0}catch{m.value=[]}_.value=!1}function T(s){d(s)}return A(()=>{S(),d()}),(s,a)=>(v(),p("div",null,[a[4]||(a[4]=e("div",{class:"mb-6"},[e("h1",{class:"page-title"},"Log AI"),e("p",{class:"page-subtitle"},"Pantau penggunaan dan kos API OpenAI")],-1)),e("div",z,[i(y,{title:"Permintaan Hari Ini",value:n.total_requests??"-",icon:u.requests,color:"blue"},null,8,["value","icon"]),i(y,{title:"Jumlah Token Hari Ini",value:n.total_tokens!=null?n.total_tokens.toLocaleString():"-",icon:u.tokens,color:"indigo"},null,8,["value","icon"]),i(y,{title:"Anggaran Kos Hari Ini",value:n.estimated_cost!=null?g(M)(n.estimated_cost):"-",icon:u.cost,color:"green"},null,8,["value","icon"])]),e("div",B,[e("div",D,[e("div",$,[f(e("select",{"onUpdate:modelValue":a[0]||(a[0]=t=>r.status=t),onChange:d,class:"input-field"},[...a[3]||(a[3]=[e("option",{value:""},"Semua Status",-1),e("option",{value:"success"},"Berjaya",-1),e("option",{value:"failed"},"Gagal",-1)])],544),[[I,r.status]]),f(e("input",{"onUpdate:modelValue":a[1]||(a[1]=t=>r.date_from=t),onChange:d,type:"date",class:"input-field",placeholder:"From date"},null,544),[[x,r.date_from]]),f(e("input",{"onUpdate:modelValue":a[2]||(a[2]=t=>r.date_to=t),onChange:d,type:"date",class:"input-field",placeholder:"To date"},null,544),[[x,r.date_to]])])])]),e("div",E,[i(V,{columns:P,items:m.value,loading:_.value},{"cell-report_id":o(({item:t})=>[e("span",H,l(t.report_id||"-"),1)]),"cell-model":o(({item:t})=>[e("span",N,l(t.model||"-"),1)]),"cell-prompt_tokens":o(({item:t})=>[e("span",j,l(t.prompt_tokens?.toLocaleString()??"-"),1)]),"cell-completion_tokens":o(({item:t})=>[e("span",G,l(t.completion_tokens?.toLocaleString()??"-"),1)]),"cell-total_tokens":o(({item:t})=>[e("span",J,l(t.total_tokens?.toLocaleString()??"-"),1)]),"cell-estimated_cost":o(({item:t})=>[e("span",K,l(g(M)(t.estimated_cost)),1)]),"cell-response_time":o(({item:t})=>[t.response_time!=null?(v(),p("span",O,l(t.response_time)+"ms",1)):(v(),p("span",F,"-"))]),"cell-status":o(({item:t})=>[i(U,{color:t.status==="success"?"green":"red"},{default:o(()=>[q(l(t.status),1)]),_:2},1032,["color"])]),"cell-created_at":o(({item:t})=>[e("span",R,l(g(C)(t.created_at)),1)]),_:1},8,["items","loading"]),e("div",Q,[i(w,{"current-page":c.currentPage,"last-page":c.lastPage,total:c.total,onPageChange:T},null,8,["current-page","last-page","total"])])])]))}};export{nt as default};
