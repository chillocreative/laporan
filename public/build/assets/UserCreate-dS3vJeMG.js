import{o as g,c as r,a as s,w,t as d,d as p,e as n,v as c,E as k,F as C,q as U,L as V,f as M,g as N,r as v,G as q,i as E,j,k as i,h as S}from"./app-CkgA-AoW.js";import{u as h}from"./useNotification-Dz5CEwoZ.js";import{u as A}from"./users-Pj1-Xddz.js";import{r as F}from"./roles-BZvqwXPl.js";/* empty css            */import"./notifications-lGq0ZMx-.js";const B={class:"max-w-3xl mx-auto"},O={class:"card"},R={class:"card-body"},D={key:0,class:"rounded-lg bg-red-50 p-3 text-sm text-red-700"},L={key:0,class:"mt-1 text-xs text-red-600"},P={key:0,class:"mt-1 text-xs text-red-600"},T={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},G={key:0,class:"mt-1 text-xs text-red-600"},z={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},H=["value"],I={key:0,class:"mt-1 text-xs text-red-600"},J={class:"flex items-end"},K={class:"flex items-center gap-2 cursor-pointer"},Q={class:"flex items-center justify-end gap-3 pt-4 border-t border-gray-100"},W=["disabled"],ae={__name:"UserCreate",setup(X){const b=j(),y=h(),a=v({name:"",email:"",password:"",password_confirmation:"",role_id:"",is_active:!0}),f=v([]),m=v(!1),u=v(""),l=q({});g(async()=>{try{const{data:o}=await F.assignable();f.value=o.data}catch{}});async function _(){m.value=!0,u.value="",Object.keys(l).forEach(o=>delete l[o]);try{const o={...a.value,role_ids:[a.value.role_id],is_active:a.value.is_active?1:0};delete o.role_id,await A.create(o),y.success("User created successfully!"),b.push({name:"users.index"})}catch(o){const e=o.response?.data?.errors;e?(Object.entries(e).forEach(([x,t])=>{l[x]=t[0]}),u.value=Object.values(e).flat()[0]):u.value=o.response?.data?.message||"Failed to create user."}finally{m.value=!1}}return(o,e)=>{const x=E("router-link");return i(),r("div",B,[e[14]||(e[14]=s("div",{class:"mb-6"},[s("h1",{class:"page-title"},"Create New User"),s("p",{class:"page-subtitle"},"Add a new user account")],-1)),s("div",O,[s("div",R,[s("form",{onSubmit:w(_,["prevent"]),class:"space-y-5"},[u.value?(i(),r("div",D,d(u.value),1)):p("",!0),s("div",null,[e[6]||(e[6]=s("label",{class:"label-text"},"Name *",-1)),n(s("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>a.value.name=t),type:"text",required:"",class:"input-field",placeholder:"Full name"},null,512),[[c,a.value.name]]),l.name?(i(),r("p",L,d(l.name),1)):p("",!0)]),s("div",null,[e[7]||(e[7]=s("label",{class:"label-text"},"Email *",-1)),n(s("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>a.value.email=t),type:"email",required:"",class:"input-field",placeholder:"email@example.com"},null,512),[[c,a.value.email]]),l.email?(i(),r("p",P,d(l.email),1)):p("",!0)]),s("div",T,[s("div",null,[e[8]||(e[8]=s("label",{class:"label-text"},"Password *",-1)),n(s("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>a.value.password=t),type:"password",required:"",class:"input-field",placeholder:"Minimum 8 characters"},null,512),[[c,a.value.password]]),l.password?(i(),r("p",G,d(l.password),1)):p("",!0)]),s("div",null,[e[9]||(e[9]=s("label",{class:"label-text"},"Confirm Password *",-1)),n(s("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>a.value.password_confirmation=t),type:"password",required:"",class:"input-field",placeholder:"Re-enter password"},null,512),[[c,a.value.password_confirmation]])])]),s("div",z,[s("div",null,[e[11]||(e[11]=s("label",{class:"label-text"},"Role *",-1)),n(s("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>a.value.role_id=t),required:"",class:"input-field"},[e[10]||(e[10]=s("option",{value:""},"Select role",-1)),(i(!0),r(C,null,U(f.value,t=>(i(),r("option",{key:t.id,value:t.id},d(t.name),9,H))),128))],512),[[k,a.value.role_id]]),l.role_ids?(i(),r("p",I,d(l.role_ids),1)):p("",!0)]),s("div",J,[s("label",K,[n(s("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>a.value.is_active=t),type:"checkbox",class:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"},null,512),[[V,a.value.is_active]]),e[12]||(e[12]=s("span",{class:"text-sm text-gray-700"},"Active account",-1))])])]),s("div",Q,[M(x,{to:{name:"users.index"},class:"btn-secondary"},{default:N(()=>[...e[13]||(e[13]=[S("Cancel",-1)])]),_:1}),s("button",{type:"submit",disabled:m.value,class:"btn-primary"},d(m.value?"Creating...":"Create User"),9,W)])],32)])])])}}};export{ae as default};
