import{o as j,c as p,a,s as y,F as w,q as M,e as n,N as _,g as f,d as b,v as r,E as A,L as T,b as G,r as x,G as P,k as i,x as O,t as u,h as g}from"./app-D7nogW7V.js";import{s as U}from"./settings-CFzEdPlG.js";import{u as $}from"./useNotification-D2PjxE6j.js";import{O as q}from"./constants-BHE7jJoG.js";import{_ as v}from"./Alert-DQ1LPNQy.js";import{_ as B}from"./LoadingSpinner-CUYk7edN.js";/* empty css            */import"./notifications-DUq4YrNs.js";const D={class:"border-b border-gray-200 mb-6"},H={class:"-mb-px flex space-x-8"},K=["onClick"],E={class:"card"},F={class:"card-body"},R={class:"space-y-4"},z={class:"mt-6 flex justify-end"},J=["disabled"],Q={key:0},W={key:1},X={class:"card"},Y={class:"card-body"},Z={class:"space-y-4"},ee={key:0,class:"mt-2 mb-3"},ae=["src"],te={class:"mt-6 flex justify-end"},se=["disabled"],le={key:0},ne={key:1},ie={class:"card"},oe={class:"card-body"},pe={class:"space-y-4"},re={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},de={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},me={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},ue={class:"mt-6 flex justify-end"},ye=["disabled"],be={key:0},ce={key:1},_e={class:"card"},fe={class:"card-body"},ge={class:"space-y-4"},ve={class:"flex items-center justify-between"},ke={class:"relative inline-flex items-center cursor-pointer"},xe=["value"],he={class:"flex items-center justify-between"},we={class:"relative inline-flex items-center cursor-pointer"},Pe={class:"mt-6 flex justify-end"},Se=["disabled"],Me={key:0},Ae={key:1},Te={class:"card"},Ue={class:"card-body"},Ce={class:"space-y-4"},Ve={class:"mt-6 flex justify-end"},Ie=["disabled"],Le={key:0},Ne={key:1},Fe={__name:"SettingsPage",setup(je){const h=$(),S=x(!0),m=x("general"),C=[{key:"general",label:"Umum"},{key:"branding",label:"Penjenamaan"},{key:"smtp",label:"SMTP / E-mel"},{key:"openai",label:"OpenAI"},{key:"captcha",label:"Captcha"}],t=P({general:{system_name:""},branding:{logo:null},smtp:{smtp_host:"",smtp_port:587,smtp_username:"",smtp_password:"",smtp_encryption:"tls",smtp_from_address:"",smtp_from_name:""},openai:{openai_enabled:!1,openai_api_key:"",openai_model:"",openai_temperature:.7,openai_max_tokens:1e3,openai_queue_enabled:!1,openai_daily_limit:100},captcha:{recaptcha_site_key:"",recaptcha_secret_key:""}}),d=P({general:!1,branding:!1,smtp:!1,openai:!1,captcha:!1}),o=P({general:{type:"",message:""},branding:{type:"",message:""},smtp:{type:"",message:""},openai:{type:"",message:""},captcha:{type:"",message:""}}),k=x(null),V=x(null);function I(l){const e=l.target.files[0];e&&(t.branding.logo=e,k.value=URL.createObjectURL(e))}function L(l){o[l].type="",o[l].message=""}function N(l){l.general&&(t.general.system_name=l.general.system_name||""),l.branding?.system_logo&&(k.value=l.branding.system_logo),l.smtp&&(t.smtp.smtp_host=l.smtp.smtp_host||"",t.smtp.smtp_port=parseInt(l.smtp.smtp_port)||587,t.smtp.smtp_username=l.smtp.smtp_username||"",t.smtp.smtp_password=l.smtp.smtp_password||"",t.smtp.smtp_encryption=l.smtp.smtp_encryption||"tls",t.smtp.smtp_from_address=l.smtp.smtp_from_address||"",t.smtp.smtp_from_name=l.smtp.smtp_from_name||""),l.openai&&(t.openai.openai_enabled=l.openai.openai_enabled==="1"||l.openai.openai_enabled===!0,t.openai.openai_api_key=l.openai.openai_api_key||"",t.openai.openai_model=l.openai.openai_model||"",t.openai.openai_temperature=parseFloat(l.openai.openai_temperature)||.7,t.openai.openai_max_tokens=parseInt(l.openai.openai_max_tokens)||1e3,t.openai.openai_queue_enabled=l.openai.openai_queue_enabled==="1"||l.openai.openai_queue_enabled===!0,t.openai.openai_daily_limit=parseInt(l.openai.openai_daily_limit)||100),l.captcha&&(t.captcha.recaptcha_site_key=l.captcha.recaptcha_site_key||"",t.captcha.recaptcha_secret_key=l.captcha.recaptcha_secret_key||"")}async function c(l){d[l]=!0,L(l);try{await U.updateGroup(l,t[l]),o[l].type="success",o[l].message="Tetapan berjaya disimpan.",h.success("Tetapan berjaya disimpan.")}catch(e){const s=e.response?.data?.message||"Gagal menyimpan tetapan. Sila cuba lagi.";o[l].type="error",o[l].message=s,h.error(s)}finally{d[l]=!1}}return j(async()=>{try{const{data:l}=await U.getAll();N(l.data||l)}catch{h.error("Gagal memuatkan tetapan.")}S.value=!1}),(l,e)=>(i(),p("div",null,[e[52]||(e[52]=a("div",{class:"mb-6"},[a("h1",{class:"page-title"},"Tetapan"),a("p",{class:"page-subtitle"},"Urus konfigurasi sistem")],-1)),S.value?(i(),y(B,{key:0,"full-page":"",text:"Memuatkan tetapan..."})):(i(),p(w,{key:1},[a("div",D,[a("nav",H,[(i(),p(w,null,M(C,s=>a("button",{key:s.key,onClick:Ge=>m.value=s.key,class:O(["whitespace-nowrap border-b-2 py-3 px-1 text-sm font-medium transition-colors",m.value===s.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"])},u(s.label),11,K)),64))])]),n(a("div",E,[a("div",F,[o.general.message?(i(),y(v,{key:0,type:o.general.type,class:"mb-4"},{default:f(()=>[g(u(o.general.message),1)]),_:1},8,["type"])):b("",!0),a("div",R,[a("div",null,[e[22]||(e[22]=a("label",{class:"label-text"},"Nama Sistem",-1)),n(a("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>t.general.system_name=s),type:"text",class:"input-field",placeholder:"Masukkan nama sistem"},null,512),[[r,t.general.system_name]])])]),a("div",z,[a("button",{onClick:e[1]||(e[1]=s=>c("general")),disabled:d.general,class:"btn-primary"},[d.general?(i(),p("span",Q,"Menyimpan...")):(i(),p("span",W,"Simpan Tetapan Umum"))],8,J)])])],512),[[_,m.value==="general"]]),n(a("div",X,[a("div",Y,[o.branding.message?(i(),y(v,{key:0,type:o.branding.type,class:"mb-4"},{default:f(()=>[g(u(o.branding.message),1)]),_:1},8,["type"])):b("",!0),a("div",Z,[a("div",null,[e[24]||(e[24]=a("label",{class:"label-text"},"Logo Sistem",-1)),k.value?(i(),p("div",ee,[e[23]||(e[23]=a("p",{class:"text-xs text-gray-500 mb-1"},"Logo semasa:",-1)),a("img",{src:k.value,alt:"System logo",class:"h-16 w-auto rounded border border-gray-200 bg-white p-1"},null,8,ae)])):b("",!0),a("input",{ref_key:"logoInput",ref:V,type:"file",accept:"image/*",class:"input-field",onChange:I},null,544),e[25]||(e[25]=a("p",{class:"mt-1 text-xs text-gray-500"},"Format diterima: JPG, PNG, SVG. Maksimum 2MB disyorkan.",-1))])]),a("div",te,[a("button",{onClick:e[2]||(e[2]=s=>c("branding")),disabled:d.branding||!t.branding.logo,class:"btn-primary"},[d.branding?(i(),p("span",le,"Memuat naik...")):(i(),p("span",ne,"Simpan Penjenamaan"))],8,se)])])],512),[[_,m.value==="branding"]]),n(a("div",ie,[a("div",oe,[o.smtp.message?(i(),y(v,{key:0,type:o.smtp.type,class:"mb-4"},{default:f(()=>[g(u(o.smtp.message),1)]),_:1},8,["type"])):b("",!0),a("div",pe,[a("div",re,[a("div",null,[e[26]||(e[26]=a("label",{class:"label-text"},"Hos SMTP",-1)),n(a("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>t.smtp.smtp_host=s),type:"text",class:"input-field",placeholder:"smtp-relay.brevo.com"},null,512),[[r,t.smtp.smtp_host]])]),a("div",null,[e[27]||(e[27]=a("label",{class:"label-text"},"Port SMTP",-1)),n(a("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>t.smtp.smtp_port=s),type:"number",class:"input-field",placeholder:"587"},null,512),[[r,t.smtp.smtp_port,void 0,{number:!0}]])])]),a("div",de,[a("div",null,[e[28]||(e[28]=a("label",{class:"label-text"},"Nama Pengguna",-1)),n(a("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>t.smtp.smtp_username=s),type:"text",class:"input-field",placeholder:"your-smtp-login"},null,512),[[r,t.smtp.smtp_username]])]),a("div",null,[e[29]||(e[29]=a("label",{class:"label-text"},"Kata Laluan",-1)),n(a("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>t.smtp.smtp_password=s),type:"password",class:"input-field",placeholder:"Masukkan kata laluan SMTP"},null,512),[[r,t.smtp.smtp_password]]),e[30]||(e[30]=a("p",{class:"mt-1 text-xs text-gray-500"},"Disimpan secara disulitkan di pelayan.",-1))])]),a("div",null,[e[32]||(e[32]=a("label",{class:"label-text"},"Penyulitan",-1)),n(a("select",{"onUpdate:modelValue":e[7]||(e[7]=s=>t.smtp.smtp_encryption=s),class:"input-field"},[...e[31]||(e[31]=[a("option",{value:"tls"},"TLS",-1),a("option",{value:"ssl"},"SSL",-1),a("option",{value:"none"},"None",-1)])],512),[[A,t.smtp.smtp_encryption]])]),a("div",me,[a("div",null,[e[33]||(e[33]=a("label",{class:"label-text"},"Alamat Pengirim",-1)),n(a("input",{"onUpdate:modelValue":e[8]||(e[8]=s=>t.smtp.smtp_from_address=s),type:"email",class:"input-field",placeholder:"noreply@yourdomain.com"},null,512),[[r,t.smtp.smtp_from_address]])]),a("div",null,[e[34]||(e[34]=a("label",{class:"label-text"},"Nama Pengirim",-1)),n(a("input",{"onUpdate:modelValue":e[9]||(e[9]=s=>t.smtp.smtp_from_name=s),type:"text",class:"input-field",placeholder:"System Name"},null,512),[[r,t.smtp.smtp_from_name]])])])]),a("div",ue,[a("button",{onClick:e[10]||(e[10]=s=>c("smtp")),disabled:d.smtp,class:"btn-primary"},[d.smtp?(i(),p("span",be,"Menyimpan...")):(i(),p("span",ce,"Simpan Tetapan SMTP"))],8,ye)])])],512),[[_,m.value==="smtp"]]),n(a("div",_e,[a("div",fe,[o.openai.message?(i(),y(v,{key:0,type:o.openai.type,class:"mb-4"},{default:f(()=>[g(u(o.openai.message),1)]),_:1},8,["type"])):b("",!0),a("div",ge,[a("div",ve,[e[36]||(e[36]=a("div",null,[a("label",{class:"label-text"},"Aktifkan Integrasi OpenAI"),a("p",{class:"text-xs text-gray-500"},"Benarkan analisis laporan berkuasa AI")],-1)),a("label",ke,[n(a("input",{"onUpdate:modelValue":e[11]||(e[11]=s=>t.openai.openai_enabled=s),type:"checkbox",class:"sr-only peer","true-value":!0,"false-value":!1},null,512),[[T,t.openai.openai_enabled]]),e[35]||(e[35]=a("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-100 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"},null,-1))])]),a("div",null,[e[37]||(e[37]=a("label",{class:"label-text"},"Kunci API",-1)),n(a("input",{"onUpdate:modelValue":e[12]||(e[12]=s=>t.openai.openai_api_key=s),type:"password",class:"input-field",placeholder:"sk-..."},null,512),[[r,t.openai.openai_api_key]]),e[38]||(e[38]=a("p",{class:"mt-1 text-xs text-gray-500"},"Kunci API OpenAI anda. Disimpan secara disulitkan di pelayan.",-1))]),a("div",null,[e[40]||(e[40]=a("label",{class:"label-text"},"Model",-1)),n(a("select",{"onUpdate:modelValue":e[13]||(e[13]=s=>t.openai.openai_model=s),class:"input-field"},[e[39]||(e[39]=a("option",{value:"",disabled:""},"Pilih model",-1)),(i(!0),p(w,null,M(G(q),s=>(i(),p("option",{key:s.value,value:s.value},u(s.label),9,xe))),128))],512),[[A,t.openai.openai_model]])]),a("div",null,[e[41]||(e[41]=a("label",{class:"label-text"},"Suhu",-1)),n(a("input",{"onUpdate:modelValue":e[14]||(e[14]=s=>t.openai.openai_temperature=s),type:"number",step:"0.1",min:"0",max:"2",class:"input-field",placeholder:"0.7"},null,512),[[r,t.openai.openai_temperature,void 0,{number:!0}]]),e[42]||(e[42]=a("p",{class:"mt-1 text-xs text-gray-500"},"Mengawal tahap rawak. Nilai rendah lebih fokus, nilai tinggi lebih kreatif (0-2).",-1))]),a("div",null,[e[43]||(e[43]=a("label",{class:"label-text"},"Token Maksimum",-1)),n(a("input",{"onUpdate:modelValue":e[15]||(e[15]=s=>t.openai.openai_max_tokens=s),type:"number",min:"100",max:"4000",class:"input-field",placeholder:"1000"},null,512),[[r,t.openai.openai_max_tokens,void 0,{number:!0}]]),e[44]||(e[44]=a("p",{class:"mt-1 text-xs text-gray-500"},"Bilangan maksimum token dalam respons (100-4000).",-1))]),a("div",he,[e[46]||(e[46]=a("div",null,[a("label",{class:"label-text"},"Gilirkan Permintaan AI"),a("p",{class:"text-xs text-gray-500"},"Proses permintaan AI secara tidak segerak melalui baris gilir")],-1)),a("label",we,[n(a("input",{"onUpdate:modelValue":e[16]||(e[16]=s=>t.openai.openai_queue_enabled=s),type:"checkbox",class:"sr-only peer","true-value":!0,"false-value":!1},null,512),[[T,t.openai.openai_queue_enabled]]),e[45]||(e[45]=a("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-100 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"},null,-1))])]),a("div",null,[e[47]||(e[47]=a("label",{class:"label-text"},"Had Permintaan Harian",-1)),n(a("input",{"onUpdate:modelValue":e[17]||(e[17]=s=>t.openai.openai_daily_limit=s),type:"number",min:"0",class:"input-field",placeholder:"100"},null,512),[[r,t.openai.openai_daily_limit,void 0,{number:!0}]]),e[48]||(e[48]=a("p",{class:"mt-1 text-xs text-gray-500"},"Permintaan AI maksimum setiap hari. Tetapkan 0 untuk tanpa had.",-1))])]),a("div",Pe,[a("button",{onClick:e[18]||(e[18]=s=>c("openai")),disabled:d.openai,class:"btn-primary"},[d.openai?(i(),p("span",Me,"Menyimpan...")):(i(),p("span",Ae,"Simpan Tetapan OpenAI"))],8,Se)])])],512),[[_,m.value==="openai"]]),n(a("div",Te,[a("div",Ue,[o.captcha.message?(i(),y(v,{key:0,type:o.captcha.type,class:"mb-4"},{default:f(()=>[g(u(o.captcha.message),1)]),_:1},8,["type"])):b("",!0),a("div",Ce,[a("div",null,[e[49]||(e[49]=a("label",{class:"label-text"},"Kunci Tapak reCAPTCHA",-1)),n(a("input",{"onUpdate:modelValue":e[19]||(e[19]=s=>t.captcha.recaptcha_site_key=s),type:"text",class:"input-field",placeholder:"6Lc..."},null,512),[[r,t.captcha.recaptcha_site_key]])]),a("div",null,[e[50]||(e[50]=a("label",{class:"label-text"},"Kunci Rahsia reCAPTCHA",-1)),n(a("input",{"onUpdate:modelValue":e[20]||(e[20]=s=>t.captcha.recaptcha_secret_key=s),type:"password",class:"input-field",placeholder:"6Lc..."},null,512),[[r,t.captcha.recaptcha_secret_key]]),e[51]||(e[51]=a("p",{class:"mt-1 text-xs text-gray-500"},"Kunci rahsia Google reCAPTCHA v2/v3 anda. Disimpan secara disulitkan di pelayan.",-1))])]),a("div",Ve,[a("button",{onClick:e[21]||(e[21]=s=>c("captcha")),disabled:d.captcha,class:"btn-primary"},[d.captcha?(i(),p("span",Le,"Menyimpan...")):(i(),p("span",Ne,"Simpan Tetapan Captcha"))],8,Ie)])])],512),[[_,m.value==="captcha"]])],64))]))}};export{Fe as default};
