import{o as _,c as i,a,w as k,t as n,d as p,e as d,v as c,E as w,F as V,q as M,L as h,f as C,g as N,r as v,G as U,i as j,j as q,k as r,h as E}from"./app-C4mD1gYF.js";import{u as B}from"./useNotification-CHfM3yRx.js";import{u as P}from"./users-YzKSGVax.js";import{r as S}from"./roles-CfworzGi.js";/* empty css            */import"./notifications-DJdsW7qO.js";const L={class:"max-w-3xl mx-auto"},A={class:"card"},O={class:"card-body"},T={key:0,class:"rounded-lg bg-red-50 p-3 text-sm text-red-700"},D={key:0,class:"mt-1 text-xs text-red-600"},F={key:0,class:"mt-1 text-xs text-red-600"},G={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},K={key:0,class:"mt-1 text-xs text-red-600"},R={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},z=["value"],H={key:0,class:"mt-1 text-xs text-red-600"},I={class:"flex items-end"},J={class:"flex items-center gap-2 cursor-pointer"},Q={class:"flex items-center justify-end gap-3 pt-4 border-t border-gray-100"},W=["disabled"],te={__name:"UserCreate",setup(X){const f=q(),g=B(),t=v({name:"",email:"",password:"",password_confirmation:"",role_id:"",is_active:!0}),b=v([]),m=v(!1),u=v(""),l=U({});_(async()=>{try{const{data:o}=await S.assignable();b.value=o.data}catch{}});async function y(){m.value=!0,u.value="",Object.keys(l).forEach(o=>delete l[o]);try{const o={...t.value,role_ids:[t.value.role_id],is_active:t.value.is_active?1:0};delete o.role_id,await P.create(o),g.success("Pengguna berjaya dicipta!"),f.push({name:"users.index"})}catch(o){const e=o.response?.data?.errors;e?(Object.entries(e).forEach(([x,s])=>{l[x]=s[0]}),u.value=Object.values(e).flat()[0]):u.value=o.response?.data?.message||"Gagal mencipta pengguna."}finally{m.value=!1}}return(o,e)=>{const x=j("router-link");return r(),i("div",L,[e[14]||(e[14]=a("div",{class:"mb-6"},[a("h1",{class:"page-title"},"Cipta Pengguna Baru"),a("p",{class:"page-subtitle"},"Tambah akaun pengguna baru")],-1)),a("div",A,[a("div",O,[a("form",{onSubmit:k(y,["prevent"]),class:"space-y-5"},[u.value?(r(),i("div",T,n(u.value),1)):p("",!0),a("div",null,[e[6]||(e[6]=a("label",{class:"label-text"},"Nama *",-1)),d(a("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>t.value.name=s),type:"text",required:"",class:"input-field",placeholder:"Nama penuh"},null,512),[[c,t.value.name]]),l.name?(r(),i("p",D,n(l.name),1)):p("",!0)]),a("div",null,[e[7]||(e[7]=a("label",{class:"label-text"},"E-mel *",-1)),d(a("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>t.value.email=s),type:"email",required:"",class:"input-field",placeholder:"email@example.com"},null,512),[[c,t.value.email]]),l.email?(r(),i("p",F,n(l.email),1)):p("",!0)]),a("div",G,[a("div",null,[e[8]||(e[8]=a("label",{class:"label-text"},"Kata Laluan *",-1)),d(a("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>t.value.password=s),type:"password",required:"",class:"input-field",placeholder:"Minimum 8 aksara"},null,512),[[c,t.value.password]]),l.password?(r(),i("p",K,n(l.password),1)):p("",!0)]),a("div",null,[e[9]||(e[9]=a("label",{class:"label-text"},"Sahkan Kata Laluan *",-1)),d(a("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>t.value.password_confirmation=s),type:"password",required:"",class:"input-field",placeholder:"Masukkan semula kata laluan"},null,512),[[c,t.value.password_confirmation]])])]),a("div",R,[a("div",null,[e[11]||(e[11]=a("label",{class:"label-text"},"Peranan *",-1)),d(a("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>t.value.role_id=s),required:"",class:"input-field"},[e[10]||(e[10]=a("option",{value:""},"Pilih peranan",-1)),(r(!0),i(V,null,M(b.value,s=>(r(),i("option",{key:s.id,value:s.id},n(s.name),9,z))),128))],512),[[w,t.value.role_id]]),l.role_ids?(r(),i("p",H,n(l.role_ids),1)):p("",!0)]),a("div",I,[a("label",J,[d(a("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>t.value.is_active=s),type:"checkbox",class:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"},null,512),[[h,t.value.is_active]]),e[12]||(e[12]=a("span",{class:"text-sm text-gray-700"},"Akaun aktif",-1))])])]),a("div",Q,[C(x,{to:{name:"users.index"},class:"btn-secondary"},{default:N(()=>[...e[13]||(e[13]=[E("Batal",-1)])]),_:1}),a("button",{type:"submit",disabled:m.value,class:"btn-primary"},n(m.value?"Mencipta...":"Cipta Pengguna"),9,W)])],32)])])])}}};export{te as default};
