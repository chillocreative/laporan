import{o as A,c as _,a as e,s as T,g as d,d as y,f as w,t as i,w as E,e as C,v as $,L as U,r as l,k as v,h as B}from"./app-C4mD1gYF.js";import{c as k}from"./categories-ImdUewCF.js";import{_ as G}from"./DataTable-D9ST-mGs.js";import{_ as z}from"./Badge-BNTmeay7.js";import{_ as P}from"./Alert-Dr5oChry.js";import{_ as q}from"./ConfirmDialog-CYSdoh5C.js";/* empty css            */import"./LoadingSpinner-nAZYCedx.js";const H={class:"card"},O={class:"font-medium text-gray-900"},F={class:"text-sm text-gray-500"},I={class:"flex items-center gap-2 justify-end"},J=["onClick"],Q=["onClick"],R={key:1,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},W={class:"relative bg-white rounded-xl shadow-xl w-full max-w-md p-6"},X={class:"text-lg font-semibold text-gray-900 mb-4"},Y={class:"grid grid-cols-2 gap-4"},Z={key:0,class:"flex items-end"},ee={class:"flex items-center gap-2 cursor-pointer"},te={key:0,class:"text-sm text-red-600"},ae={class:"flex justify-end gap-3 pt-2"},se=["disabled"],ve={__name:"CategoryList",setup(le){const x=l([]),b=l(!0),r=l(!1),n=l(null),o=l({name:"",sort_order:0,is_active:!0}),u=l(""),p=l(!1),f=l(!1),c=l(null),g=l(""),V=l("success"),M=[{key:"name",label:"Nama"},{key:"is_active",label:"Status"},{key:"sort_order",label:"Susunan"}];async function h(){b.value=!0;try{const{data:s}=await k.list();x.value=s.data}catch{m("error","Gagal memuatkan kategori.")}b.value=!1}function K(){n.value=null,o.value={name:"",sort_order:x.value.length+1,is_active:!0},u.value="",r.value=!0}function L(s){n.value=s,o.value={name:s.name,sort_order:s.sort_order,is_active:s.is_active},u.value="",r.value=!0}async function j(){p.value=!0,u.value="";try{n.value?(await k.update(n.value.id,o.value),m("success","Kategori dikemas kini.")):(await k.store(o.value),m("success","Kategori dicipta.")),r.value=!1,h()}catch(s){const t=s.response?.data?.errors;u.value=t?Object.values(t).flat()[0]:"Gagal menyimpan kategori."}p.value=!1}function D(s){c.value=s,f.value=!0}async function N(){f.value=!1;try{await k.delete(c.value.id),m("success",`Kategori '${c.value.name}' dipadam.`),h()}catch{m("error","Gagal memadam kategori.")}c.value=null}function m(s,t){V.value=s,g.value=t,setTimeout(()=>{g.value=""},4e3)}return A(h),(s,t)=>(v(),_("div",null,[e("div",{class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 gap-4"},[t[6]||(t[6]=e("div",null,[e("h1",{class:"page-title"},"Kategori"),e("p",{class:"page-subtitle"},"Urus kategori laporan")],-1)),e("button",{onClick:K,class:"btn-primary"},"+ Kategori Baru")]),g.value?(v(),T(P,{key:0,type:V.value,class:"mb-4"},{default:d(()=>[B(i(g.value),1)]),_:1},8,["type"])):y("",!0),e("div",H,[w(G,{columns:M,items:x.value,loading:b.value},{"cell-name":d(({item:a})=>[e("span",O,i(a.name),1)]),"cell-is_active":d(({item:a})=>[w(z,{color:a.is_active?"green":"red"},{default:d(()=>[B(i(a.is_active?"Aktif":"Tidak Aktif"),1)]),_:2},1032,["color"])]),"cell-sort_order":d(({item:a})=>[e("span",F,i(a.sort_order),1)]),actions:d(({item:a})=>[e("div",I,[e("button",{onClick:S=>L(a),class:"text-gray-400 hover:text-primary-600",title:"Edit"},[...t[7]||(t[7]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125"})],-1)])],8,J),e("button",{onClick:S=>D(a),class:"text-gray-400 hover:text-red-600",title:"Delete"},[...t[8]||(t[8]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})],-1)])],8,Q)])]),_:1},8,["items","loading"])]),r.value?(v(),_("div",R,[e("div",{class:"fixed inset-0 bg-black/50",onClick:t[0]||(t[0]=a=>r.value=!1)}),e("div",W,[e("h3",X,i(n.value?"Edit Kategori":"Kategori Baru"),1),e("form",{onSubmit:E(j,["prevent"]),class:"space-y-4"},[e("div",null,[t[9]||(t[9]=e("label",{class:"label-text"},"Nama *",-1)),C(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>o.value.name=a),type:"text",required:"",class:"input-field",placeholder:"Nama kategori"},null,512),[[$,o.value.name]])]),e("div",Y,[e("div",null,[t[10]||(t[10]=e("label",{class:"label-text"},"Susunan",-1)),C(e("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>o.value.sort_order=a),type:"number",min:"0",class:"input-field"},null,512),[[$,o.value.sort_order,void 0,{number:!0}]])]),n.value?(v(),_("div",Z,[e("label",ee,[C(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>o.value.is_active=a),type:"checkbox",class:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"},null,512),[[U,o.value.is_active]]),t[11]||(t[11]=e("span",{class:"text-sm text-gray-700"},"Aktif",-1))])])):y("",!0)]),u.value?(v(),_("div",te,i(u.value),1)):y("",!0),e("div",ae,[e("button",{type:"button",onClick:t[4]||(t[4]=a=>r.value=!1),class:"btn-secondary"},"Batal"),e("button",{type:"submit",disabled:p.value,class:"btn-primary"},i(p.value?"Menyimpan...":"Simpan"),9,se)])],32)])])):y("",!0),w(q,{modelValue:f.value,"onUpdate:modelValue":t[5]||(t[5]=a=>f.value=a),title:"Padam Kategori",message:`Adakah anda pasti mahu memadam '${c.value?.name}'?`,"confirm-text":"Padam",danger:!0,onConfirm:N},null,8,["modelValue","message"])]))}};export{ve as default};
