import{u as R}from"./useAuth-QckoxxNb.js";import{D as j,o as N,c as a,a as e,t as r,b as h,s as b,F as d,f as c,q as g,d as y,x as u,g as p,r as f,i as z,k as t,h as A}from"./app-C6LpV1Kr.js";import{_ as m}from"./StatCard-DsOxxkmE.js";import{_ as H}from"./LoadingSpinner-D_ea0_jR.js";/* empty css            */const L={getStats(){return j.get("/dashboard")}},V={class:"mb-6"},T={class:"page-subtitle"},C={class:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6"},S={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6"},B={class:"card"},D={class:"card-body"},q={class:"space-y-3"},I={class:"flex items-center gap-3"},F={class:"text-sm text-gray-700"},O={class:"text-sm font-semibold text-gray-900"},P={key:0,class:"text-sm text-gray-400 text-center py-4"},$={class:"card"},E={class:"card-body"},Q={class:"space-y-3"},U={class:"flex items-center gap-2"},W={class:"text-sm text-gray-600 capitalize"},G={class:"text-sm font-semibold text-gray-900"},J={key:0,class:"text-sm text-gray-400 text-center py-4"},K={key:0,class:"card"},X={class:"card-body"},Y={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},Z={class:"flex items-center gap-3"},ee={class:"flex items-center gap-3"},te={class:"flex items-center gap-3"},se={class:"text-sm text-gray-700"},ae={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-6"},le={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6"},oe={class:"card"},re={class:"card-body"},ie={class:"space-y-3"},ne={class:"flex items-center gap-3"},de={class:"text-sm text-gray-700"},ce={class:"text-sm font-semibold text-gray-900"},ue={key:0,class:"text-sm text-gray-400 text-center py-4"},_e={class:"card"},ge={class:"card-body"},ye={class:"space-y-3"},me={class:"flex items-center gap-2"},ve={class:"text-sm text-gray-600 capitalize"},pe={class:"text-sm font-semibold text-gray-900"},xe={key:0,class:"text-sm text-gray-400 text-center py-4"},he={class:"card"},be={class:"card-header flex items-center justify-between"},fe={class:"card-body p-0"},ke={key:0,class:"p-8 text-center text-sm text-gray-400"},we={key:1,class:"divide-y divide-gray-100"},Ae={class:"min-w-0 flex-1"},Me={class:"text-sm font-medium text-gray-900 truncate"},Re={class:"text-xs text-gray-400 mt-0.5"},je={class:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6"},Ne={class:"card"},ze={class:"card-header flex items-center justify-between"},He={class:"card-body p-0"},Le={key:0,class:"p-8 text-center text-sm text-gray-400"},Ve={key:1,class:"divide-y divide-gray-100"},Te={class:"min-w-0"},Ce={class:"text-sm font-medium text-gray-900 truncate"},Se={class:"text-xs text-gray-400 mt-0.5"},Pe={__name:"DashboardPage",setup(Be){const x=R(),k=f(!0),o=f({}),_=f([]);function w(n){return{low:"bg-green-500",medium:"bg-yellow-500",high:"bg-orange-500",critical:"bg-red-500"}[n]||"bg-gray-400"}function M(n){return{low:"bg-green-100 text-green-800",medium:"bg-yellow-100 text-yellow-800",high:"bg-orange-100 text-orange-800",critical:"bg-red-100 text-red-800"}[n]||"bg-gray-100 text-gray-800"}return N(async()=>{try{const{data:n}=await L.getStats();o.value=n.data,n.data.recent_reports?.data&&(_.value=n.data.recent_reports.data),n.data.my_reports?.data&&(_.value=n.data.my_reports.data)}catch{}k.value=!1}),(n,l)=>{const v=z("router-link");return t(),a("div",null,[e("div",V,[l[0]||(l[0]=e("h1",{class:"page-title"},"Dashboard",-1)),e("p",T,"Welcome back, "+r(h(x).user.value?.name),1)]),k.value?(t(),b(H,{key:0,"full-page":"",text:"Loading dashboard..."})):(t(),a(d,{key:1},[h(x).isSuperAdmin.value?(t(),a(d,{key:0},[e("div",C,[c(m,{title:"Total Reports",value:o.value.reports?.total||0,color:"blue",icon:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"},null,8,["value"]),c(m,{title:"AI Requests Today",value:o.value.ai_usage?.total_requests||0,color:"indigo",icon:"M9.75 3.104v5.714a2.25 2.25 0 01-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 014.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0112 15a9.065 9.065 0 00-6.23.693L5 14.5m14.8.8l1.402 1.402c1.232 1.232.65 3.318-1.067 3.611A48.309 48.309 0 0112 21c-2.773 0-5.491-.235-8.135-.687-1.718-.293-2.3-2.379-1.067-3.61L5 14.5"},null,8,["value"])]),e("div",S,[e("div",B,[l[1]||(l[1]=e("div",{class:"card-header"},[e("h3",{class:"text-base font-semibold text-gray-900"},"Top 5 Active Reporters")],-1)),e("div",D,[e("div",q,[(t(!0),a(d,null,g(o.value.top_reporters,(s,i)=>(t(),a("div",{key:s.user_id,class:"flex items-center justify-between"},[e("div",I,[e("span",{class:u(["flex items-center justify-center h-6 w-6 rounded-full text-xs font-semibold",i===0?"bg-yellow-100 text-yellow-800":i===1?"bg-gray-100 text-gray-700":i===2?"bg-orange-100 text-orange-700":"bg-blue-50 text-blue-600"])},r(i+1),3),e("span",F,r(s.user_name),1)]),e("span",O,r(s.report_count)+" reports",1)]))),128)),o.value.top_reporters?.length?y("",!0):(t(),a("div",P,"No reports yet"))])])]),e("div",$,[l[2]||(l[2]=e("div",{class:"card-header"},[e("h3",{class:"text-base font-semibold text-gray-900"},"Reports by Risk Level")],-1)),e("div",E,[e("div",Q,[(t(!0),a(d,null,g(o.value.reports?.by_risk_level,(s,i)=>(t(),a("div",{key:i,class:"flex items-center justify-between"},[e("div",U,[e("span",{class:u(["h-2.5 w-2.5 rounded-full",w(i)])},null,2),e("span",W,r(i),1)]),e("span",G,r(s),1)]))),128)),Object.keys(o.value.reports?.by_risk_level||{}).length?y("",!0):(t(),a("div",J,"No AI analysis yet"))])])])]),o.value.system_health?(t(),a("div",K,[l[5]||(l[5]=e("div",{class:"card-header"},[e("h3",{class:"text-base font-semibold text-gray-900"},"System Health")],-1)),e("div",X,[e("div",Y,[e("div",Z,[e("span",{class:u(["h-3 w-3 rounded-full",o.value.system_health.database?"bg-green-500":"bg-red-500"])},null,2),l[3]||(l[3]=e("span",{class:"text-sm text-gray-700"},"Database",-1))]),e("div",ee,[e("span",{class:u(["h-3 w-3 rounded-full",o.value.system_health.queue?"bg-green-500":"bg-red-500"])},null,2),l[4]||(l[4]=e("span",{class:"text-sm text-gray-700"},"Queue",-1))]),e("div",te,[e("span",{class:u(["h-3 w-3 rounded-full",o.value.system_health.storage?.healthy?"bg-green-500":"bg-red-500"])},null,2),e("span",se,"Storage ("+r(o.value.system_health.storage?.used_percent||0)+"% used)",1)])])])])):y("",!0)],64)):h(x).isAdmin.value?(t(),a(d,{key:1},[e("div",ae,[c(m,{title:"Total Reports",value:o.value.reports?.total||0,color:"blue",icon:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"},null,8,["value"]),c(m,{title:"Total Users",value:o.value.total_users||0,color:"indigo",icon:"M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z"},null,8,["value"]),c(v,{to:{name:"users.index"},class:"block h-full"},{default:p(()=>[c(m,{title:"Pending Approvals",value:o.value.pending_approvals||0,color:o.value.pending_approvals>0?"red":"green",icon:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"},null,8,["value","color"])]),_:1})]),e("div",le,[e("div",oe,[l[6]||(l[6]=e("div",{class:"card-header"},[e("h3",{class:"text-base font-semibold text-gray-900"},"Top 5 Active Reporters")],-1)),e("div",re,[e("div",ie,[(t(!0),a(d,null,g(o.value.top_reporters,(s,i)=>(t(),a("div",{key:s.user_id,class:"flex items-center justify-between"},[e("div",ne,[e("span",{class:u(["flex items-center justify-center h-6 w-6 rounded-full text-xs font-semibold",i===0?"bg-yellow-100 text-yellow-800":i===1?"bg-gray-100 text-gray-700":i===2?"bg-orange-100 text-orange-700":"bg-blue-50 text-blue-600"])},r(i+1),3),e("span",de,r(s.user_name),1)]),e("span",ce,r(s.report_count)+" reports",1)]))),128)),o.value.top_reporters?.length?y("",!0):(t(),a("div",ue,"No reports yet"))])])]),e("div",_e,[l[7]||(l[7]=e("div",{class:"card-header"},[e("h3",{class:"text-base font-semibold text-gray-900"},"Reports by Risk Level")],-1)),e("div",ge,[e("div",ye,[(t(!0),a(d,null,g(o.value.reports?.by_risk_level,(s,i)=>(t(),a("div",{key:i,class:"flex items-center justify-between"},[e("div",me,[e("span",{class:u(["h-2.5 w-2.5 rounded-full",w(i)])},null,2),e("span",ve,r(i),1)]),e("span",pe,r(s),1)]))),128)),Object.keys(o.value.reports?.by_risk_level||{}).length?y("",!0):(t(),a("div",xe,"No AI analysis yet"))])])])]),e("div",he,[e("div",be,[l[9]||(l[9]=e("h3",{class:"text-base font-semibold text-gray-900"},"Recent Reports",-1)),c(v,{to:{name:"reports.index"},class:"text-sm text-primary-600 hover:text-primary-700 font-medium"},{default:p(()=>[...l[8]||(l[8]=[A("View All",-1)])]),_:1})]),e("div",fe,[_.value.length?(t(),a("div",we,[(t(!0),a(d,null,g(_.value,s=>(t(),b(v,{key:s.id,to:{name:"reports.show",params:{id:s.id}},class:"flex items-center justify-between px-6 py-4 hover:bg-gray-50 transition-colors"},{default:p(()=>[e("div",Ae,[e("p",Me,r(s.title),1),e("p",Re,r(s.category)+" · "+r(s.incident_date)+" · by "+r(s.user?.name),1)]),s.ai_analysis?.risk_level?(t(),a("span",{key:0,class:u(["ml-3 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium capitalize",M(s.ai_analysis.risk_level.value)])},r(s.ai_analysis.risk_level.label),3)):y("",!0)]),_:2},1032,["to"]))),128))])):(t(),a("div",ke,"No reports yet."))])])],64)):(t(),a(d,{key:2},[e("div",je,[c(m,{title:"My Reports",value:o.value.reports?.total||0,color:"blue",icon:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"},null,8,["value"])]),e("div",Ne,[e("div",ze,[l[11]||(l[11]=e("h3",{class:"text-base font-semibold text-gray-900"},"Recent Reports",-1)),c(v,{to:{name:"reports.create"},class:"btn-primary btn-sm"},{default:p(()=>[...l[10]||(l[10]=[A("New Report",-1)])]),_:1})]),e("div",He,[_.value.length?(t(),a("div",Ve,[(t(!0),a(d,null,g(_.value,s=>(t(),b(v,{key:s.id,to:{name:"reports.show",params:{id:s.id}},class:"flex items-center justify-between px-6 py-4 hover:bg-gray-50 transition-colors"},{default:p(()=>[e("div",Te,[e("p",Ce,r(s.title),1),e("p",Se,r(s.category)+" · "+r(s.incident_date),1)])]),_:2},1032,["to"]))),128))])):(t(),a("div",Le,"No reports yet. Create your first report!"))])])],64))],64))])}}};export{Pe as default};
