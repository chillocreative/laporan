import{o as C,c as p,a as e,f as i,b as g,e as f,E as q,v as x,g as o,G as y,r as b,k as v,t as l,h as A}from"./app-UaHG2GIC.js";import{l as L}from"./logs-BrY1lVJk.js";import{b as M,a as V}from"./formatters-mqXhrHnm.js";import{_ as D}from"./DataTable-D6r3aRVp.js";import{_ as I}from"./Badge-DAhmnd02.js";import{_ as U}from"./Pagination-D0576I20.js";import{_ as k}from"./StatCard-BqDixo-q.js";/* empty css            */import"./LoadingSpinner-BRfTtkMt.js";const w={class:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6"},z={class:"card mb-6"},E={class:"card-body"},$={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},B={class:"card"},N={class:"font-mono text-xs text-gray-700"},R={class:"text-sm font-medium text-gray-700"},F={class:"text-sm text-gray-600"},O={class:"text-sm text-gray-600"},j={class:"text-sm font-medium text-gray-800"},G={class:"text-sm text-gray-600"},H={key:0,class:"text-xs text-gray-500"},J={key:1,class:"text-xs text-gray-400"},K={class:"text-xs text-gray-500"},Q={class:"px-4 border-t border-gray-100"},nt={__name:"AILogs",setup(W){const m=b([]),_=b(!0),n=y({total_requests:null,total_tokens:null,estimated_cost:null}),r=y({currentPage:1,lastPage:1,total:0}),c=y({status:"",date_from:"",date_to:""}),u={requests:"M3.75 3v11.25A2.25 2.25 0 006 16.5h2.25M3.75 3h-1.5m1.5 0h16.5m0 0h1.5m-1.5 0v11.25A2.25 2.25 0 0118 16.5h-2.25m-7.5 0h7.5m-7.5 0l-1 3m8.5-3l1 3m0 0l.5 1.5m-.5-1.5h-9.5m0 0l-.5 1.5M9 11.25v1.5M12 9v3.75m3-6v6",tokens:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.455 2.456L21.75 6l-1.036.259a3.375 3.375 0 00-2.455 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z",cost:"M12 6v12m-3-2.818l.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},T=[{key:"report_id",label:"Report ID"},{key:"model",label:"Model"},{key:"prompt_tokens",label:"Prompt"},{key:"completion_tokens",label:"Completion"},{key:"total_tokens",label:"Total Tokens"},{key:"estimated_cost",label:"Cost"},{key:"response_time",label:"Response Time"},{key:"status",label:"Status"},{key:"created_at",label:"Date"}];async function P(){try{const{data:a}=await L.aiTodayUsage();n.total_requests=a.data?.total_requests??a.total_requests??0,n.total_tokens=a.data?.total_tokens??a.total_tokens??0,n.estimated_cost=a.data?.estimated_cost??a.estimated_cost??0}catch{}}async function d(a=1){_.value=!0;try{const s={...c,page:a,per_page:15};Object.keys(s).forEach(h=>{s[h]||delete s[h]});const{data:t}=await L.ai(s);m.value=t.data,r.currentPage=t.meta?.current_page||1,r.lastPage=t.meta?.last_page||1,r.total=t.meta?.total||0}catch{m.value=[]}_.value=!1}function S(a){d(a)}return C(()=>{P(),d()}),(a,s)=>(v(),p("div",null,[s[4]||(s[4]=e("div",{class:"mb-6"},[e("h1",{class:"page-title"},"AI Logs"),e("p",{class:"page-subtitle"},"Monitor OpenAI API usage and costs")],-1)),e("div",w,[i(k,{title:"Today's Requests",value:n.total_requests??"-",icon:u.requests,color:"blue"},null,8,["value","icon"]),i(k,{title:"Today's Total Tokens",value:n.total_tokens!=null?n.total_tokens.toLocaleString():"-",icon:u.tokens,color:"indigo"},null,8,["value","icon"]),i(k,{title:"Today's Estimated Cost",value:n.estimated_cost!=null?g(M)(n.estimated_cost):"-",icon:u.cost,color:"green"},null,8,["value","icon"])]),e("div",z,[e("div",E,[e("div",$,[f(e("select",{"onUpdate:modelValue":s[0]||(s[0]=t=>c.status=t),onChange:d,class:"input-field"},[...s[3]||(s[3]=[e("option",{value:""},"All Statuses",-1),e("option",{value:"success"},"Success",-1),e("option",{value:"failed"},"Failed",-1)])],544),[[q,c.status]]),f(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>c.date_from=t),onChange:d,type:"date",class:"input-field",placeholder:"From date"},null,544),[[x,c.date_from]]),f(e("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>c.date_to=t),onChange:d,type:"date",class:"input-field",placeholder:"To date"},null,544),[[x,c.date_to]])])])]),e("div",B,[i(D,{columns:T,items:m.value,loading:_.value},{"cell-report_id":o(({item:t})=>[e("span",N,l(t.report_id||"-"),1)]),"cell-model":o(({item:t})=>[e("span",R,l(t.model||"-"),1)]),"cell-prompt_tokens":o(({item:t})=>[e("span",F,l(t.prompt_tokens?.toLocaleString()??"-"),1)]),"cell-completion_tokens":o(({item:t})=>[e("span",O,l(t.completion_tokens?.toLocaleString()??"-"),1)]),"cell-total_tokens":o(({item:t})=>[e("span",j,l(t.total_tokens?.toLocaleString()??"-"),1)]),"cell-estimated_cost":o(({item:t})=>[e("span",G,l(g(M)(t.estimated_cost)),1)]),"cell-response_time":o(({item:t})=>[t.response_time!=null?(v(),p("span",H,l(t.response_time)+"ms",1)):(v(),p("span",J,"-"))]),"cell-status":o(({item:t})=>[i(I,{color:t.status==="success"?"green":"red"},{default:o(()=>[A(l(t.status),1)]),_:2},1032,["color"])]),"cell-created_at":o(({item:t})=>[e("span",K,l(g(V)(t.created_at)),1)]),_:1},8,["items","loading"]),e("div",Q,[i(U,{"current-page":r.currentPage,"last-page":r.lastPage,total:r.total,onPageChange:S},null,8,["current-page","last-page","total"])])])]))}};export{nt as default};
