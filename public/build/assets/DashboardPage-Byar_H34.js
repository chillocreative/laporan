import{u as j}from"./useAuth-D7dfYpNE.js";import{D as T,o as H,c as a,a as e,t as o,b as x,s as b,F as d,f as c,q as _,d as m,x as u,g as p,r as f,i as S,k as t,h as A}from"./app-C4mD1gYF.js";import{_ as v}from"./StatCard-DuVESRxB.js";import{_ as z}from"./LoadingSpinner-nAZYCedx.js";/* empty css            */const P={getStats(){return T.get("/dashboard")}},B={class:"mb-6"},V={class:"page-subtitle"},C={class:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6"},D={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6"},I={class:"card"},N={class:"card-body"},R={class:"space-y-3"},q={class:"flex items-center gap-3"},J={class:"text-sm text-gray-700"},K={class:"text-sm font-semibold text-gray-900"},F={key:0,class:"text-sm text-gray-400 text-center py-4"},O={class:"card"},$={class:"card-body"},E={class:"space-y-3"},G={class:"flex items-center gap-2"},Q={class:"text-sm text-gray-600"},U={class:"text-sm font-semibold text-gray-900"},W={key:0,class:"text-sm text-gray-400 text-center py-4"},X={key:0,class:"card"},Y={class:"card-body"},Z={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},ee={class:"flex items-center gap-3"},te={class:"flex items-center gap-3"},se={class:"flex items-center gap-3"},ae={class:"text-sm text-gray-700"},le={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-6"},ie={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6"},oe={class:"card"},re={class:"card-body"},ne={class:"space-y-3"},de={class:"flex items-center gap-3"},ce={class:"text-sm text-gray-700"},ue={class:"text-sm font-semibold text-gray-900"},ge={key:0,class:"text-sm text-gray-400 text-center py-4"},_e={class:"card"},me={class:"card-body"},ve={class:"space-y-3"},ye={class:"flex items-center gap-2"},pe={class:"text-sm text-gray-600"},he={class:"text-sm font-semibold text-gray-900"},xe={key:0,class:"text-sm text-gray-400 text-center py-4"},be={class:"card"},fe={class:"card-header flex items-center justify-between"},ke={class:"card-body p-0"},we={key:0,class:"p-8 text-center text-sm text-gray-400"},Me={key:1,class:"divide-y divide-gray-100"},Ae={class:"min-w-0 flex-1"},Le={class:"text-sm font-medium text-gray-900 truncate"},je={class:"text-xs text-gray-400 mt-0.5"},Te={class:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6"},He={class:"card"},Se={class:"card-header flex items-center justify-between"},ze={class:"card-body p-0"},Pe={key:0,class:"p-8 text-center text-sm text-gray-400"},Be={key:1,class:"divide-y divide-gray-100"},Ve={class:"min-w-0"},Ce={class:"text-sm font-medium text-gray-900 truncate"},De={class:"text-xs text-gray-400 mt-0.5"},Fe={__name:"DashboardPage",setup(Ie){const h=j(),k=f(!0),i=f({}),g=f([]);function w(n){return{low:"bg-green-500",medium:"bg-yellow-500",high:"bg-orange-500",critical:"bg-red-500"}[n]||"bg-gray-400"}function M(n){return{low:"Rendah",medium:"Sederhana",high:"Tinggi",critical:"Kritikal"}[n]||n}function L(n){return{low:"bg-green-100 text-green-800",medium:"bg-yellow-100 text-yellow-800",high:"bg-orange-100 text-orange-800",critical:"bg-red-100 text-red-800"}[n]||"bg-gray-100 text-gray-800"}return H(async()=>{try{const{data:n}=await P.getStats();i.value=n.data,n.data.recent_reports?.data&&(g.value=n.data.recent_reports.data),n.data.my_reports?.data&&(g.value=n.data.my_reports.data)}catch{}k.value=!1}),(n,l)=>{const y=S("router-link");return t(),a("div",null,[e("div",B,[l[0]||(l[0]=e("h1",{class:"page-title"},"Dashboard",-1)),e("p",V,"Selamat kembali, "+o(x(h).user.value?.name),1)]),k.value?(t(),b(z,{key:0,"full-page":"",text:"Memuatkan dashboard..."})):(t(),a(d,{key:1},[x(h).isSuperAdmin.value?(t(),a(d,{key:0},[e("div",C,[c(v,{title:"Jumlah Laporan",value:i.value.reports?.total||0,color:"blue",icon:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"},null,8,["value"]),c(v,{title:"Permintaan AI Hari Ini",value:i.value.ai_usage?.total_requests||0,color:"indigo",icon:"M9.75 3.104v5.714a2.25 2.25 0 01-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 014.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0112 15a9.065 9.065 0 00-6.23.693L5 14.5m14.8.8l1.402 1.402c1.232 1.232.65 3.318-1.067 3.611A48.309 48.309 0 0112 21c-2.773 0-5.491-.235-8.135-.687-1.718-.293-2.3-2.379-1.067-3.61L5 14.5"},null,8,["value"])]),e("div",D,[e("div",I,[l[1]||(l[1]=e("div",{class:"card-header"},[e("h3",{class:"text-base font-semibold text-gray-900"},"5 Pelapor Paling Aktif")],-1)),e("div",N,[e("div",R,[(t(!0),a(d,null,_(i.value.top_reporters,(s,r)=>(t(),a("div",{key:s.user_id,class:"flex items-center justify-between"},[e("div",q,[e("span",{class:u(["flex items-center justify-center h-6 w-6 rounded-full text-xs font-semibold",r===0?"bg-yellow-100 text-yellow-800":r===1?"bg-gray-100 text-gray-700":r===2?"bg-orange-100 text-orange-700":"bg-blue-50 text-blue-600"])},o(r+1),3),e("span",J,o(s.user_name),1)]),e("span",K,o(s.report_count)+" laporan",1)]))),128)),i.value.top_reporters?.length?m("",!0):(t(),a("div",F,"Tiada laporan lagi"))])])]),e("div",O,[l[2]||(l[2]=e("div",{class:"card-header"},[e("h3",{class:"text-base font-semibold text-gray-900"},"Laporan Mengikut Tahap Risiko")],-1)),e("div",$,[e("div",E,[(t(!0),a(d,null,_(i.value.reports?.by_risk_level,(s,r)=>(t(),a("div",{key:r,class:"flex items-center justify-between"},[e("div",G,[e("span",{class:u(["h-2.5 w-2.5 rounded-full",w(r)])},null,2),e("span",Q,o(M(r)),1)]),e("span",U,o(s),1)]))),128)),Object.keys(i.value.reports?.by_risk_level||{}).length?m("",!0):(t(),a("div",W,"Tiada analisis AI lagi"))])])])]),i.value.system_health?(t(),a("div",X,[l[5]||(l[5]=e("div",{class:"card-header"},[e("h3",{class:"text-base font-semibold text-gray-900"},"Kesihatan Sistem")],-1)),e("div",Y,[e("div",Z,[e("div",ee,[e("span",{class:u(["h-3 w-3 rounded-full",i.value.system_health.database?"bg-green-500":"bg-red-500"])},null,2),l[3]||(l[3]=e("span",{class:"text-sm text-gray-700"},"Pangkalan Data",-1))]),e("div",te,[e("span",{class:u(["h-3 w-3 rounded-full",i.value.system_health.queue?"bg-green-500":"bg-red-500"])},null,2),l[4]||(l[4]=e("span",{class:"text-sm text-gray-700"},"Baris Gilir",-1))]),e("div",se,[e("span",{class:u(["h-3 w-3 rounded-full",i.value.system_health.storage?.healthy?"bg-green-500":"bg-red-500"])},null,2),e("span",ae,"Storan ("+o(i.value.system_health.storage?.used_percent||0)+"% used)",1)])])])])):m("",!0)],64)):x(h).isAdmin.value?(t(),a(d,{key:1},[e("div",le,[c(v,{title:"Jumlah Laporan",value:i.value.reports?.total||0,color:"blue",icon:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"},null,8,["value"]),c(v,{title:"Jumlah Pengguna",value:i.value.total_users||0,color:"indigo",icon:"M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z"},null,8,["value"]),c(y,{to:{name:"users.index"},class:"block h-full"},{default:p(()=>[c(v,{title:"Menunggu Kelulusan",value:i.value.pending_approvals||0,color:i.value.pending_approvals>0?"red":"green",icon:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"},null,8,["value","color"])]),_:1})]),e("div",ie,[e("div",oe,[l[6]||(l[6]=e("div",{class:"card-header"},[e("h3",{class:"text-base font-semibold text-gray-900"},"5 Pelapor Paling Aktif")],-1)),e("div",re,[e("div",ne,[(t(!0),a(d,null,_(i.value.top_reporters,(s,r)=>(t(),a("div",{key:s.user_id,class:"flex items-center justify-between"},[e("div",de,[e("span",{class:u(["flex items-center justify-center h-6 w-6 rounded-full text-xs font-semibold",r===0?"bg-yellow-100 text-yellow-800":r===1?"bg-gray-100 text-gray-700":r===2?"bg-orange-100 text-orange-700":"bg-blue-50 text-blue-600"])},o(r+1),3),e("span",ce,o(s.user_name),1)]),e("span",ue,o(s.report_count)+" laporan",1)]))),128)),i.value.top_reporters?.length?m("",!0):(t(),a("div",ge,"Tiada laporan lagi"))])])]),e("div",_e,[l[7]||(l[7]=e("div",{class:"card-header"},[e("h3",{class:"text-base font-semibold text-gray-900"},"Laporan Mengikut Tahap Risiko")],-1)),e("div",me,[e("div",ve,[(t(!0),a(d,null,_(i.value.reports?.by_risk_level,(s,r)=>(t(),a("div",{key:r,class:"flex items-center justify-between"},[e("div",ye,[e("span",{class:u(["h-2.5 w-2.5 rounded-full",w(r)])},null,2),e("span",pe,o(M(r)),1)]),e("span",he,o(s),1)]))),128)),Object.keys(i.value.reports?.by_risk_level||{}).length?m("",!0):(t(),a("div",xe,"Tiada analisis AI lagi"))])])])]),e("div",be,[e("div",fe,[l[9]||(l[9]=e("h3",{class:"text-base font-semibold text-gray-900"},"Laporan Terkini",-1)),c(y,{to:{name:"reports.index"},class:"text-sm text-primary-600 hover:text-primary-700 font-medium"},{default:p(()=>[...l[8]||(l[8]=[A("Lihat Semua",-1)])]),_:1})]),e("div",ke,[g.value.length?(t(),a("div",Me,[(t(!0),a(d,null,_(g.value,s=>(t(),b(y,{key:s.id,to:{name:"reports.show",params:{id:s.id}},class:"flex items-center justify-between px-6 py-4 hover:bg-gray-50 transition-colors"},{default:p(()=>[e("div",Ae,[e("p",Le,o(s.title),1),e("p",je,o(s.category)+" · "+o(s.incident_date)+" · by "+o(s.user?.name),1)]),s.ai_analysis?.risk_level?(t(),a("span",{key:0,class:u(["ml-3 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium capitalize",L(s.ai_analysis.risk_level.value)])},o(s.ai_analysis.risk_level.label),3)):m("",!0)]),_:2},1032,["to"]))),128))])):(t(),a("div",we,"Tiada laporan lagi."))])])],64)):(t(),a(d,{key:2},[e("div",Te,[c(v,{title:"Laporan Saya",value:i.value.reports?.total||0,color:"blue",icon:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"},null,8,["value"])]),e("div",He,[e("div",Se,[l[11]||(l[11]=e("h3",{class:"text-base font-semibold text-gray-900"},"Laporan Terkini",-1)),c(y,{to:{name:"reports.create"},class:"btn-primary btn-sm"},{default:p(()=>[...l[10]||(l[10]=[A("Laporan Baru",-1)])]),_:1})]),e("div",ze,[g.value.length?(t(),a("div",Be,[(t(!0),a(d,null,_(g.value,s=>(t(),b(y,{key:s.id,to:{name:"reports.show",params:{id:s.id}},class:"flex items-center justify-between px-6 py-4 hover:bg-gray-50 transition-colors"},{default:p(()=>[e("div",Ve,[e("p",Ce,o(s.title),1),e("p",De,o(s.category)+" · "+o(s.incident_date),1)])]),_:2},1032,["to"]))),128))])):(t(),a("div",Pe,"Tiada laporan lagi. Cipta laporan pertama anda!"))])])],64))],64))])}}};export{Fe as default};
